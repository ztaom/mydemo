!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):e.lib_share=i()}(this,function(){"use strict";function e(e){document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{appid:"",img_url:e.shareImage,img_width:"640",img_height:"640",link:e.link,desc:e.desc,title:e.title},function(){})}),WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{appid:"",img_url:e.shareImage,img_width:"640",img_height:"640",link:e.link,desc:e.desc,title:e.timelineTitle},function(){})})},!1)}function i(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=window.navigator.userAgent,o=i;o.title=o.title||window.document.title,o.timelineTitle=o.timelineTitle||o.title||window.document.title,o.desc=o.desc||"该视频来自「优酷」中国领先的视频网站,为您提供高清,流畅的视频体验",o.link=o.link||window.location.href,o.shareImage=o.shareImage||"https://static.youku.com/h5/html/share/images/h5_300x300.png",/MicroMessenger/i.test(n)?(e(o),t.init(o)):/DingTalk/i.test(n)&&a.init(o)}var n="";try{n=window.lib&&window.lib.mtop?window.lib.mtop:require("@ali/lib-mtop")}catch(e){console.log(e)}n.config.prefix="acs",n.config.subDomain="",n.config.mainDomain="youku.com";var t={initData:null,init:function(e){t.initData=e,n.request({api:"mtop.youku.mplay.weixin.getWeixinJssdk",v:"1.0",ecode:0,appKey:"23774304",H5Request:!0,dataType:"json",data:{link:encodeURIComponent(location.href)}}).then(function(e){t.callback(e)},function(e){console.log("getWeixinJssdk fail")})},callback:function(e){var i=/test=1/i.test(window.location.href);wx.config({debug:i,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone"]}),wx.ready(function(){t.shareTimeline(),t.shareAppMessage(),t.shareQQ(),t.shareQZone()})},shareTimeline:function(){var e=t.initData;wx.onMenuShareTimeline({title:e.timelineTitle,desc:e.desc,link:e.link,imgUrl:e.shareImage,success:function(){},cancel:function(){}})},shareAppMessage:function(){var e=t.initData;wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.shareImage,success:function(){},cancel:function(){}})},shareQQ:function(){var e=t.initData;wx.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.shareImage,success:function(){}})},shareQZone:function(){var e=t.initData;wx.onMenuShareQZone({title:e.title,desc:e.desc,link:e.link,imgUrl:e.shareImage,success:function(){}})}},a={initData:null,init:function(e){try{a.initData=e,dd.ready(function(){var e=a.initData;dd.biz.navigation.setRight({show:!0,control:!0,text:"",onSuccess:function(i){dd.biz.util.share({type:0,url:e.link,title:e.title,content:e.desc,image:e.shareImage,onSuccess:function(){},onFail:function(e){}})},onFail:function(e){}}),dd.biz.navigation.setTitle({title:e.title,onSuccess:function(e){},onFail:function(e){}})})}catch(e){console.log(e)}}};return window.shareH5=i,i});
