!function(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define("CSS3D",[],a):"object"==typeof exports?exports.CSS3D=a():t.CSS3D=a()}(this,function(){return function(t){function a(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}var n={};return a.m=t,a.c=n,a.p="",a(0)}([function(t,a,n){t.exports=n(2)},,function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(3),e=r(o),u=n(18),l=r(u);t.exports={Obj:e.default,Scene:l.default}},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),u=n(4),l=r(u),i=n(16),s=r(i),M=n(17),c=r(M),h=function(){function t(a){o(this,t),a||(a={}),this.dom=document.createElement(a.htmlTag||"div"),this.dom.style.position="absolute",this.docfrag=document.createDocumentFragment(),this.children=[],this._isDomInserted=!1,this._position(),this._rotation()}return e(t,null,[{key:"implements",value:function(a){for(var n in a)t.prototype[n]=a[n]}}]),e(t,[{key:"render",value:function(){this._isDomInserted||(this.dom.appendChild(this.docfrag),this._isDomInserted=!0),this.children&&this.children.length>0&&this.children.forEach(function(t){t.render()}),this.dom.style.transform=this.dom.style.webkitTransform=this.css()}},{key:"getChildren",value:function(){return this.children}},{key:"addChild",value:function(t){return this._isDomInserted?this.dom.appendChild(t.dom):this.docfrag.appendChild(t.dom),this.children.push(t),this}},{key:"removeChild",value:function(t){return this}}]),t}();a.default=h,h.implements(l.default),h.implements(s.default),h.implements(c.default)},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(5),e=n(15),u=r(e);t.exports={scale:function(t){var a=this.mat;return o.mat4.scale(a,a,t),this},_position:function(){var t=this;return this.mat=o.mat4.create(),this._position=[0,0,0],this.up=[0,1,0],Object.defineProperties(this,{position:{set:function(a){t.mat[12]=a[0],t.mat[13]=a[1],t.mat[14]=a[2],t._position=a},get:function(){return t._position}}}),this},translateTo:function(t){return t?(this.position=[t[0],t[1],t[2]],this):this},translate:function(t){if(!t)return this;var a=this.mat,n=this._position;return o.mat4.translate(a,a,t),t.forEach(function(a,r){n[r]+=t[r]}),this},_getQuaternionsFromEuler:function(t){var a=Math.cos,n=Math.sin,r=t[0],o=t[1],e=t[2],u=a(.5*e),l=n(.5*e),i=a(.5*r),s=n(.5*r),M=a(.5*o),c=n(.5*o),h=u*i*M+l*s*c,f=-(u*s*M-l*i*c),x=-(u*i*c+l*s*M),S=-(l*i*M-u*s*c);return[f,x,S,h]},_rotation:function(){var t=this;this.quaternion=[0,0,0,0],this._euler=[0,0,0],Object.defineProperties(this,{euler:{set:function(a){var n=t._getQuaternionsFromEuler(a);o.mat4.create();o.mat4.fromRotationTranslation(t.mat,n,[t.mat[12],t.mat[13],t.mat[14]]),t._euler=a},get:function(){return t._euler}}})},_getQuaternionFromMatrix:function(t){var a=o.quat.create();return o.mat4.getRotation(a,t||this.mat),a},_getEulerFromQuaternion:function(t){var a=t[1]*t[1],n=2*(t[3]*t[0]+t[1]*t[2]),r=1-2*(t[0]*t[0]+a),o=Math.atan2(n,r),e=2*(t[3]*t[1]-t[2]*t[0]);e=e>1?1:e,e=e<-1?-1:e;var u=Math.asin(e),l=2*(t[3]*t[2]+t[0]*t[1]),i=1-2*(a+t[2]*t[2]),s=Math.atan2(l,i);return[o,u,s]},rotateTo:function(t){return void 0===t?this:(this.euler=[t[0],t[1],t[2]],this)},rotate:function(t,a){if(void 0===t)return this;var n=this.mat;return o.mat4.rotate(n,n,t,a),this.quaternion=this._getQuaternionFromMatrix(),this._euler=this._getEulerFromQuaternion(this.quaternion),this},lookAt:function(t){var a=o.mat4.create();return o.mat4.lookAt(a,t,this._position,this.up),o.mat4.translate(a,a,[this.mat[12],this.mat[13],this.mat[14]]),o.mat4.copy(this.mat,a),this.quaternion=this._getQuaternionFromMatrix(),this._euler=this._getEulerFromQuaternion(this.quaternion),this},matrix:function(t){return this.mat=t,this},css:function(){var t="",a=o.mat4.create();return o.mat4.copy(a,this.mat),this._isSceneObj&&(t="translate3d(-50%,-50%,0) ",a[4]=-a[4],a[5]=-a[5],a[6]=-a[6],a[7]=-a[7]),t+=(0,u.default)(a)}}},function(t,a,n){a.glMatrix=n(6),a.mat2=n(7),a.mat2d=n(8),a.mat3=n(9),a.mat4=n(10),a.quat=n(11),a.vec2=n(14),a.vec3=n(12),a.vec4=n(13)},function(t,a){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var r=Math.PI/180;n.toRadian=function(t){return t*r},n.equals=function(t,a){return Math.abs(t-a)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=n},function(t,a,n){var r=n(6),o={};o.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var a=new r.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.fromValues=function(t,a,n,o){var e=new r.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e},o.set=function(t,a,n,r,o){return t[0]=a,t[1]=n,t[2]=r,t[3]=o,t},o.transpose=function(t,a){if(t===a){var n=a[1];t[1]=a[2],t[2]=n}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},o.invert=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=n*e-o*r;return u?(u=1/u,t[0]=e*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t):null},o.adjoint=function(t,a){var n=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=n,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=n[0],i=n[1],s=n[2],M=n[3];return t[0]=r*l+e*i,t[1]=o*l+u*i,t[2]=r*s+e*M,t[3]=o*s+u*M,t},o.mul=o.multiply,o.rotate=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=Math.sin(n),i=Math.cos(n);return t[0]=r*i+e*l,t[1]=o*i+u*l,t[2]=r*-l+e*i,t[3]=o*-l+u*i,t},o.scale=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=n[0],i=n[1];return t[0]=r*l,t[1]=o*l,t[2]=e*i,t[3]=u*i,t},o.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,a,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,a,n]},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t},o.sub=o.subtract,o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},o.equals=function(t,a){var n=t[0],o=t[1],e=t[2],u=t[3],l=a[0],i=a[1],s=a[2],M=a[3];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(e-s)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},o.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t},o.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t},t.exports=o},function(t,a,n){var r=n(6),o={};o.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var a=new r.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.fromValues=function(t,a,n,o,e,u){var l=new r.ARRAY_TYPE(6);return l[0]=t,l[1]=a,l[2]=n,l[3]=o,l[4]=e,l[5]=u,l},o.set=function(t,a,n,r,o,e,u){return t[0]=a,t[1]=n,t[2]=r,t[3]=o,t[4]=e,t[5]=u,t},o.invert=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=a[4],l=a[5],i=n*e-r*o;return i?(i=1/i,t[0]=e*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t[4]=(o*l-e*u)*i,t[5]=(r*u-n*l)*i,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=n[0],M=n[1],c=n[2],h=n[3],f=n[4],x=n[5];return t[0]=r*s+e*M,t[1]=o*s+u*M,t[2]=r*c+e*h,t[3]=o*c+u*h,t[4]=r*f+e*x+l,t[5]=o*f+u*x+i,t},o.mul=o.multiply,o.rotate=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=Math.sin(n),M=Math.cos(n);return t[0]=r*M+e*s,t[1]=o*M+u*s,t[2]=r*-s+e*M,t[3]=o*-s+u*M,t[4]=l,t[5]=i,t},o.scale=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=n[0],M=n[1];return t[0]=r*s,t[1]=o*s,t[2]=e*M,t[3]=u*M,t[4]=l,t[5]=i,t},o.translate=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=n[0],M=n[1];return t[0]=r,t[1]=o,t[2]=e,t[3]=u,t[4]=r*s+e*M+l,t[5]=o*s+u*M+i,t},o.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t},o.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},o.equals=function(t,a){var n=t[0],o=t[1],e=t[2],u=t[3],l=t[4],i=t[5],s=a[0],M=a[1],c=a[2],h=a[3],f=a[4],x=a[5];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-M)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(e-c)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(u-h)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(l-f)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))},t.exports=o},function(t,a,n){var r=n(6),o={};o.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},o.clone=function(t){var a=new r.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},o.fromValues=function(t,a,n,o,e,u,l,i,s){var M=new r.ARRAY_TYPE(9);return M[0]=t,M[1]=a,M[2]=n,M[3]=o,M[4]=e,M[5]=u,M[6]=l,M[7]=i,M[8]=s,M},o.set=function(t,a,n,r,o,e,u,l,i,s){return t[0]=a,t[1]=n,t[2]=r,t[3]=o,t[4]=e,t[5]=u,t[6]=l,t[7]=i,t[8]=s,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,a){if(t===a){var n=a[1],r=a[2],o=a[5];t[1]=a[3],t[2]=a[6],t[3]=n,t[5]=a[7],t[6]=r,t[7]=o}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},o.invert=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=a[4],l=a[5],i=a[6],s=a[7],M=a[8],c=M*u-l*s,h=-M*e+l*i,f=s*e-u*i,x=n*c+r*h+o*f;return x?(x=1/x,t[0]=c*x,t[1]=(-M*r+o*s)*x,t[2]=(l*r-o*u)*x,t[3]=h*x,t[4]=(M*n-o*i)*x,t[5]=(-l*n+o*e)*x,t[6]=f*x,t[7]=(-s*n+r*i)*x,t[8]=(u*n-r*e)*x,t):null},o.adjoint=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=a[4],l=a[5],i=a[6],s=a[7],M=a[8];return t[0]=u*M-l*s,t[1]=o*s-r*M,t[2]=r*l-o*u,t[3]=l*i-e*M,t[4]=n*M-o*i,t[5]=o*e-n*l,t[6]=e*s-u*i,t[7]=r*i-n*s,t[8]=n*u-r*e,t},o.determinant=function(t){var a=t[0],n=t[1],r=t[2],o=t[3],e=t[4],u=t[5],l=t[6],i=t[7],s=t[8];return a*(s*e-u*i)+n*(-s*o+u*l)+r*(i*o-e*l)},o.multiply=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=n[0],f=n[1],x=n[2],S=n[3],I=n[4],m=n[5],D=n[6],d=n[7],F=n[8];return t[0]=h*r+f*u+x*s,t[1]=h*o+f*l+x*M,t[2]=h*e+f*i+x*c,t[3]=S*r+I*u+m*s,t[4]=S*o+I*l+m*M,t[5]=S*e+I*i+m*c,t[6]=D*r+d*u+F*s,t[7]=D*o+d*l+F*M,t[8]=D*e+d*i+F*c,t},o.mul=o.multiply,o.translate=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=n[0],f=n[1];return t[0]=r,t[1]=o,t[2]=e,t[3]=u,t[4]=l,t[5]=i,t[6]=h*r+f*u+s,t[7]=h*o+f*l+M,t[8]=h*e+f*i+c,t},o.rotate=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=Math.sin(n),f=Math.cos(n);return t[0]=f*r+h*u,t[1]=f*o+h*l,t[2]=f*e+h*i,t[3]=f*u-h*r,t[4]=f*l-h*o,t[5]=f*i-h*e,t[6]=s,t[7]=M,t[8]=c,t},o.scale=function(t,a,n){var r=n[0],o=n[1];return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=o*a[3],t[4]=o*a[4],t[5]=o*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},o.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},o.fromQuat=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=n+n,l=r+r,i=o+o,s=n*u,M=r*u,c=r*l,h=o*u,f=o*l,x=o*i,S=e*u,I=e*l,m=e*i;return t[0]=1-c-x,t[3]=M-m,t[6]=h+I,t[1]=M+m,t[4]=1-s-x,t[7]=f-S,t[2]=h-I,t[5]=f+S,t[8]=1-s-c,t},o.normalFromMat4=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=a[4],l=a[5],i=a[6],s=a[7],M=a[8],c=a[9],h=a[10],f=a[11],x=a[12],S=a[13],I=a[14],m=a[15],D=n*l-r*u,d=n*i-o*u,F=n*s-e*u,v=r*i-o*l,b=r*s-e*l,p=o*s-e*i,w=M*S-c*x,y=M*I-h*x,z=M*m-f*x,E=c*I-h*S,_=c*m-f*S,P=h*m-f*I,A=D*P-d*_+F*E+v*z-b*y+p*w;return A?(A=1/A,t[0]=(l*P-i*_+s*E)*A,t[1]=(i*z-u*P-s*y)*A,t[2]=(u*_-l*z+s*w)*A,t[3]=(o*_-r*P-e*E)*A,t[4]=(n*P-o*z+e*y)*A,t[5]=(r*z-n*_-e*w)*A,t[6]=(S*p-I*b+m*v)*A,t[7]=(I*F-x*p-m*d)*A,t[8]=(x*b-S*F+m*D)*A,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t},o.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t[6]=a[6]+n[6]*r,t[7]=a[7]+n[7]*r,t[8]=a[8]+n[8]*r,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},o.equals=function(t,a){var n=t[0],o=t[1],e=t[2],u=t[3],l=t[4],i=t[5],s=t[6],M=t[7],c=t[8],h=a[0],f=a[1],x=a[2],S=a[3],I=a[4],m=a[5],D=t[6],d=a[7],F=a[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(e-x)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(u-S)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-I)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(i-m)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-D)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(M-d)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(d))&&Math.abs(c-F)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))},t.exports=o},function(t,a,n){var r=n(6),o={scalar:{},SIMD:{}};o.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var a=new r.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.fromValues=function(t,a,n,o,e,u,l,i,s,M,c,h,f,x,S,I){var m=new r.ARRAY_TYPE(16);return m[0]=t,m[1]=a,m[2]=n,m[3]=o,m[4]=e,m[5]=u,m[6]=l,m[7]=i,m[8]=s,m[9]=M,m[10]=c,m[11]=h,m[12]=f,m[13]=x,m[14]=S,m[15]=I,m},o.set=function(t,a,n,r,o,e,u,l,i,s,M,c,h,f,x,S,I){return t[0]=a,t[1]=n,t[2]=r,t[3]=o,t[4]=e,t[5]=u,t[6]=l,t[7]=i,t[8]=s,t[9]=M,t[10]=c,t[11]=h,t[12]=f,t[13]=x,t[14]=S,t[15]=I,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.scalar.transpose=function(t,a){if(t===a){var n=a[1],r=a[2],o=a[3],e=a[6],u=a[7],l=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=n,t[6]=a[9],t[7]=a[13],t[8]=r,t[9]=e,t[11]=a[14],t[12]=o,t[13]=u,t[14]=l}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},o.SIMD.transpose=function(t,a){var n,r,o,e,u,l,i,s,M,c;return n=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.shuffle(n,r,0,1,4,5),l=SIMD.Float32x4.shuffle(o,e,0,1,4,5),i=SIMD.Float32x4.shuffle(u,l,0,2,4,6),s=SIMD.Float32x4.shuffle(u,l,1,3,5,7),SIMD.Float32x4.store(t,0,i),SIMD.Float32x4.store(t,4,s),u=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(o,e,2,3,6,7),M=SIMD.Float32x4.shuffle(u,l,0,2,4,6),c=SIMD.Float32x4.shuffle(u,l,1,3,5,7),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,c),t},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=a[4],l=a[5],i=a[6],s=a[7],M=a[8],c=a[9],h=a[10],f=a[11],x=a[12],S=a[13],I=a[14],m=a[15],D=n*l-r*u,d=n*i-o*u,F=n*s-e*u,v=r*i-o*l,b=r*s-e*l,p=o*s-e*i,w=M*S-c*x,y=M*I-h*x,z=M*m-f*x,E=c*I-h*S,_=c*m-f*S,P=h*m-f*I,A=D*P-d*_+F*E+v*z-b*y+p*w;return A?(A=1/A,t[0]=(l*P-i*_+s*E)*A,t[1]=(o*_-r*P-e*E)*A,t[2]=(S*p-I*b+m*v)*A,t[3]=(h*b-c*p-f*v)*A,t[4]=(i*z-u*P-s*y)*A,t[5]=(n*P-o*z+e*y)*A,t[6]=(I*F-x*p-m*d)*A,t[7]=(M*p-h*F+f*d)*A,t[8]=(u*_-l*z+s*w)*A,t[9]=(r*z-n*_-e*w)*A,t[10]=(x*b-S*F+m*D)*A,t[11]=(c*F-M*b-f*D)*A,t[12]=(l*y-u*E-i*w)*A,t[13]=(n*E-r*y+o*w)*A,t[14]=(S*d-x*v-I*D)*A,t[15]=(M*v-c*d+h*D)*A,t):null},o.SIMD.invert=function(t,a){var n,r,o,e,u,l,i,s,M,c,h=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),x=SIMD.Float32x4.load(a,8),S=SIMD.Float32x4.load(a,12);return u=SIMD.Float32x4.shuffle(h,f,0,1,4,5),r=SIMD.Float32x4.shuffle(x,S,0,1,4,5),n=SIMD.Float32x4.shuffle(u,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,u,1,3,5,7),u=SIMD.Float32x4.shuffle(h,f,2,3,6,7),e=SIMD.Float32x4.shuffle(x,S,2,3,6,7),o=SIMD.Float32x4.shuffle(u,e,0,2,4,6),e=SIMD.Float32x4.shuffle(e,u,1,3,5,7),u=SIMD.Float32x4.mul(o,e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.mul(r,u),i=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),l),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.mul(r,o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),l),M=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,u)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),l),s=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,u)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.mul(n,r),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),s),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,u),M),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,u),s),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(o,u)),u=SIMD.Float32x4.mul(n,e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,u)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,u),s),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),i),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,u)),u=SIMD.Float32x4.mul(n,o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),i),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(r,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,u)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,u),M),c=SIMD.Float32x4.mul(n,l),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),u=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(u,u),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(u,u))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,i)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,M)),t):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=a[4],l=a[5],i=a[6],s=a[7],M=a[8],c=a[9],h=a[10],f=a[11],x=a[12],S=a[13],I=a[14],m=a[15];return t[0]=l*(h*m-f*I)-c*(i*m-s*I)+S*(i*f-s*h),t[1]=-(r*(h*m-f*I)-c*(o*m-e*I)+S*(o*f-e*h)),t[2]=r*(i*m-s*I)-l*(o*m-e*I)+S*(o*s-e*i),t[3]=-(r*(i*f-s*h)-l*(o*f-e*h)+c*(o*s-e*i)),t[4]=-(u*(h*m-f*I)-M*(i*m-s*I)+x*(i*f-s*h)),t[5]=n*(h*m-f*I)-M*(o*m-e*I)+x*(o*f-e*h),t[6]=-(n*(i*m-s*I)-u*(o*m-e*I)+x*(o*s-e*i)),t[7]=n*(i*f-s*h)-u*(o*f-e*h)+M*(o*s-e*i),t[8]=u*(c*m-f*S)-M*(l*m-s*S)+x*(l*f-s*c),t[9]=-(n*(c*m-f*S)-M*(r*m-e*S)+x*(r*f-e*c)),t[10]=n*(l*m-s*S)-u*(r*m-e*S)+x*(r*s-e*l),t[11]=-(n*(l*f-s*c)-u*(r*f-e*c)+M*(r*s-e*l)),t[12]=-(u*(c*I-h*S)-M*(l*I-i*S)+x*(l*h-i*c)),t[13]=n*(c*I-h*S)-M*(r*I-o*S)+x*(r*h-o*c),t[14]=-(n*(l*I-i*S)-u*(r*I-o*S)+x*(r*i-o*l)),t[15]=n*(l*h-i*c)-u*(r*h-o*c)+M*(r*i-o*l),t},o.SIMD.adjoint=function(t,a){var n,r,o,e,u,l,i,s,M,c,h,f,x,n=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12);return M=SIMD.Float32x4.shuffle(n,r,0,1,4,5),l=SIMD.Float32x4.shuffle(o,e,0,1,4,5),u=SIMD.Float32x4.shuffle(M,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,M,1,3,5,7),M=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(o,e,2,3,6,7),i=SIMD.Float32x4.shuffle(M,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,M,1,3,5,7),M=SIMD.Float32x4.mul(i,s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),c=SIMD.Float32x4.mul(l,M),h=SIMD.Float32x4.mul(u,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,M),c),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),M=SIMD.Float32x4.mul(l,i),M=SIMD.Float32x4.swizzle(M,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),c),x=SIMD.Float32x4.mul(u,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,M)),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),x),x=SIMD.Float32x4.swizzle(x,2,3,0,1),M=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,M),c),f=SIMD.Float32x4.mul(u,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,M)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),M=SIMD.Float32x4.mul(u,l),M=SIMD.Float32x4.swizzle(M,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),f),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,M),x),M=SIMD.Float32x4.swizzle(M,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,M),f),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(i,M)),M=SIMD.Float32x4.mul(u,s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(i,M)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),f),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,M),h),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,M)),M=SIMD.Float32x4.mul(u,i),M=SIMD.Float32x4.swizzle(M,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),h),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(l,M)),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,M)),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),x),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,x),t},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var a=t[0],n=t[1],r=t[2],o=t[3],e=t[4],u=t[5],l=t[6],i=t[7],s=t[8],M=t[9],c=t[10],h=t[11],f=t[12],x=t[13],S=t[14],I=t[15],m=a*u-n*e,D=a*l-r*e,d=a*i-o*e,F=n*l-r*u,v=n*i-o*u,b=r*i-o*l,p=s*x-M*f,w=s*S-c*f,y=s*I-h*f,z=M*S-c*x,E=M*I-h*x,_=c*I-h*S;return m*_-D*E+d*z+F*y-v*w+b*p},o.SIMD.multiply=function(t,a,n){var r=SIMD.Float32x4.load(a,0),o=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),u=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.load(n,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),u))));SIMD.Float32x4.store(t,0,i);var s=SIMD.Float32x4.load(n,4),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),u))));SIMD.Float32x4.store(t,4,M);var c=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),u))));SIMD.Float32x4.store(t,8,h);var f=SIMD.Float32x4.load(n,12),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),u))));return SIMD.Float32x4.store(t,12,x),t},o.scalar.multiply=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=a[9],f=a[10],x=a[11],S=a[12],I=a[13],m=a[14],D=a[15],d=n[0],F=n[1],v=n[2],b=n[3];return t[0]=d*r+F*l+v*c+b*S,t[1]=d*o+F*i+v*h+b*I,t[2]=d*e+F*s+v*f+b*m,t[3]=d*u+F*M+v*x+b*D,d=n[4],F=n[5],v=n[6],b=n[7],t[4]=d*r+F*l+v*c+b*S,t[5]=d*o+F*i+v*h+b*I,t[6]=d*e+F*s+v*f+b*m,t[7]=d*u+F*M+v*x+b*D,d=n[8],F=n[9],v=n[10],b=n[11],t[8]=d*r+F*l+v*c+b*S,t[9]=d*o+F*i+v*h+b*I,t[10]=d*e+F*s+v*f+b*m,t[11]=d*u+F*M+v*x+b*D,d=n[12],F=n[13],v=n[14],b=n[15],t[12]=d*r+F*l+v*c+b*S,t[13]=d*o+F*i+v*h+b*I,t[14]=d*e+F*s+v*f+b*m,t[15]=d*u+F*M+v*x+b*D,t},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,a,n){var r,o,e,u,l,i,s,M,c,h,f,x,S=n[0],I=n[1],m=n[2];return a===t?(t[12]=a[0]*S+a[4]*I+a[8]*m+a[12],t[13]=a[1]*S+a[5]*I+a[9]*m+a[13],t[14]=a[2]*S+a[6]*I+a[10]*m+a[14],t[15]=a[3]*S+a[7]*I+a[11]*m+a[15]):(r=a[0],o=a[1],e=a[2],u=a[3],l=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=a[9],f=a[10],x=a[11],t[0]=r,t[1]=o,t[2]=e,t[3]=u,t[4]=l,t[5]=i,t[6]=s,t[7]=M,t[8]=c,t[9]=h,t[10]=f,t[11]=x,t[12]=r*S+l*I+c*m+a[12],t[13]=o*S+i*I+h*m+a[13],t[14]=e*S+s*I+f*m+a[14],t[15]=u*S+M*I+x*m+a[15]),t},o.SIMD.translate=function(t,a,n){var r=SIMD.Float32x4.load(a,0),o=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),u=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4(n[0],n[1],n[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(l,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(l,1,1,1,1)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(l,2,2,2,2));var i=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(e,u)));return SIMD.Float32x4.store(t,12,i),t},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,a,n){var r=n[0],o=n[1],e=n[2];return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=a[7]*o,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.SIMD.scale=function(t,a,n){var r,o,e,u=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0))),o=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1))),e=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,a,n,o){var e,u,l,i,s,M,c,h,f,x,S,I,m,D,d,F,v,b,p,w,y,z,E,_,P=o[0],A=o[1],O=o[2],g=Math.sqrt(P*P+A*A+O*O);return Math.abs(g)<r.EPSILON?null:(g=1/g,P*=g,A*=g,O*=g,e=Math.sin(n),u=Math.cos(n),l=1-u,i=a[0],s=a[1],M=a[2],c=a[3],h=a[4],f=a[5],x=a[6],S=a[7],I=a[8],m=a[9],D=a[10],d=a[11],F=P*P*l+u,v=A*P*l+O*e,b=O*P*l-A*e,p=P*A*l-O*e,w=A*A*l+u,y=O*A*l+P*e,z=P*O*l+A*e,E=A*O*l-P*e,_=O*O*l+u,t[0]=i*F+h*v+I*b,t[1]=s*F+f*v+m*b,t[2]=M*F+x*v+D*b,t[3]=c*F+S*v+d*b,t[4]=i*p+h*w+I*y,t[5]=s*p+f*w+m*y,t[6]=M*p+x*w+D*y,t[7]=c*p+S*w+d*y,t[8]=i*z+h*E+I*_,t[9]=s*z+f*E+m*_,t[10]=M*z+x*E+D*_,t[11]=c*z+S*E+d*_,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},o.scalar.rotateX=function(t,a,n){var r=Math.sin(n),o=Math.cos(n),e=a[4],u=a[5],l=a[6],i=a[7],s=a[8],M=a[9],c=a[10],h=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*o+s*r,t[5]=u*o+M*r,t[6]=l*o+c*r,t[7]=i*o+h*r,t[8]=s*o-e*r,t[9]=M*o-u*r,t[10]=c*o-l*r,t[11]=h*o-i*r,t},o.SIMD.rotateX=function(t,a,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,4),u=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(u,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,o),SIMD.Float32x4.mul(e,r))),t},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,a,n){var r=Math.sin(n),o=Math.cos(n),e=a[0],u=a[1],l=a[2],i=a[3],s=a[8],M=a[9],c=a[10],h=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o-s*r,t[1]=u*o-M*r,
t[2]=l*o-c*r,t[3]=i*o-h*r,t[8]=e*r+s*o,t[9]=u*r+M*o,t[10]=l*r+c*o,t[11]=i*r+h*o,t},o.SIMD.rotateY=function(t,a,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(u,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,r),SIMD.Float32x4.mul(u,o))),t},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,a,n){var r=Math.sin(n),o=Math.cos(n),e=a[0],u=a[1],l=a[2],i=a[3],s=a[4],M=a[5],c=a[6],h=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o+s*r,t[1]=u*o+M*r,t[2]=l*o+c*r,t[3]=i*o+h*r,t[4]=s*o-e*r,t[5]=M*o-u*r,t[6]=c*o-l*r,t[7]=h*o-i*r,t},o.SIMD.rotateZ=function(t,a,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(u,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,o),SIMD.Float32x4.mul(e,r))),t},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,a,n){var o,e,u,l=n[0],i=n[1],s=n[2],M=Math.sqrt(l*l+i*i+s*s);return Math.abs(M)<r.EPSILON?null:(M=1/M,l*=M,i*=M,s*=M,o=Math.sin(a),e=Math.cos(a),u=1-e,t[0]=l*l*u+e,t[1]=i*l*u+s*o,t[2]=s*l*u-i*o,t[3]=0,t[4]=l*i*u-s*o,t[5]=i*i*u+e,t[6]=s*i*u+l*o,t[7]=0,t[8]=l*s*u+i*o,t[9]=i*s*u-l*o,t[10]=s*s*u+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=r+r,i=o+o,s=e+e,M=r*l,c=r*i,h=r*s,f=o*i,x=o*s,S=e*s,I=u*l,m=u*i,D=u*s;return t[0]=1-(f+S),t[1]=c+D,t[2]=h-m,t[3]=0,t[4]=c-D,t[5]=1-(M+S),t[6]=x+I,t[7]=0,t[8]=h+m,t[9]=x-I,t[10]=1-(M+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},o.getRotation=function(t,a){var n=a[0]+a[5]+a[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(a[6]-a[9])/r,t[1]=(a[8]-a[2])/r,t[2]=(a[1]-a[4])/r):a[0]>a[5]&a[0]>a[10]?(r=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/r,t[0]=.25*r,t[1]=(a[1]+a[4])/r,t[2]=(a[8]+a[2])/r):a[5]>a[10]?(r=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/r,t[0]=(a[1]+a[4])/r,t[1]=.25*r,t[2]=(a[6]+a[9])/r):(r=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/r,t[0]=(a[8]+a[2])/r,t[1]=(a[6]+a[9])/r,t[2]=.25*r),t},o.fromRotationTranslationScale=function(t,a,n,r){var o=a[0],e=a[1],u=a[2],l=a[3],i=o+o,s=e+e,M=u+u,c=o*i,h=o*s,f=o*M,x=e*s,S=e*M,I=u*M,m=l*i,D=l*s,d=l*M,F=r[0],v=r[1],b=r[2];return t[0]=(1-(x+I))*F,t[1]=(h+d)*F,t[2]=(f-D)*F,t[3]=0,t[4]=(h-d)*v,t[5]=(1-(c+I))*v,t[6]=(S+m)*v,t[7]=0,t[8]=(f+D)*b,t[9]=(S-m)*b,t[10]=(1-(c+x))*b,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,a,n,r,o){var e=a[0],u=a[1],l=a[2],i=a[3],s=e+e,M=u+u,c=l+l,h=e*s,f=e*M,x=e*c,S=u*M,I=u*c,m=l*c,D=i*s,d=i*M,F=i*c,v=r[0],b=r[1],p=r[2],w=o[0],y=o[1],z=o[2];return t[0]=(1-(S+m))*v,t[1]=(f+F)*v,t[2]=(x-d)*v,t[3]=0,t[4]=(f-F)*b,t[5]=(1-(h+m))*b,t[6]=(I+D)*b,t[7]=0,t[8]=(x+d)*p,t[9]=(I-D)*p,t[10]=(1-(h+S))*p,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*y+t[8]*z),t[13]=n[1]+y-(t[1]*w+t[5]*y+t[9]*z),t[14]=n[2]+z-(t[2]*w+t[6]*y+t[10]*z),t[15]=1,t},o.fromQuat=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=n+n,l=r+r,i=o+o,s=n*u,M=r*u,c=r*l,h=o*u,f=o*l,x=o*i,S=e*u,I=e*l,m=e*i;return t[0]=1-c-x,t[1]=M+m,t[2]=h-I,t[3]=0,t[4]=M-m,t[5]=1-s-x,t[6]=f+S,t[7]=0,t[8]=h+I,t[9]=f-S,t[10]=1-s-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,a,n,r,o,e,u){var l=1/(n-a),i=1/(o-r),s=1/(e-u);return t[0]=2*e*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*i,t[6]=0,t[7]=0,t[8]=(n+a)*l,t[9]=(o+r)*i,t[10]=(u+e)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*e*2*s,t[15]=0,t},o.perspective=function(t,a,n,r,o){var e=1/Math.tan(a/2),u=1/(r-o);return t[0]=e/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*u,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,a,n,r){var o=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),u=Math.tan(a.leftDegrees*Math.PI/180),l=Math.tan(a.rightDegrees*Math.PI/180),i=2/(u+l),s=2/(o+e);return t[0]=i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((u-l)*i*.5),t[9]=(o-e)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},o.ortho=function(t,a,n,r,o,e,u){var l=1/(a-n),i=1/(r-o),s=1/(e-u);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(a+n)*l,t[13]=(o+r)*i,t[14]=(u+e)*s,t[15]=1,t},o.lookAt=function(t,a,n,e){var u,l,i,s,M,c,h,f,x,S,I=a[0],m=a[1],D=a[2],d=e[0],F=e[1],v=e[2],b=n[0],p=n[1],w=n[2];return Math.abs(I-b)<r.EPSILON&&Math.abs(m-p)<r.EPSILON&&Math.abs(D-w)<r.EPSILON?o.identity(t):(h=I-b,f=m-p,x=D-w,S=1/Math.sqrt(h*h+f*f+x*x),h*=S,f*=S,x*=S,u=F*x-v*f,l=v*h-d*x,i=d*f-F*h,S=Math.sqrt(u*u+l*l+i*i),S?(S=1/S,u*=S,l*=S,i*=S):(u=0,l=0,i=0),s=f*i-x*l,M=x*u-h*i,c=h*l-f*u,S=Math.sqrt(s*s+M*M+c*c),S?(S=1/S,s*=S,M*=S,c*=S):(s=0,M=0,c=0),t[0]=u,t[1]=s,t[2]=h,t[3]=0,t[4]=l,t[5]=M,t[6]=f,t[7]=0,t[8]=i,t[9]=c,t[10]=x,t[11]=0,t[12]=-(u*I+l*m+i*D),t[13]=-(s*I+M*m+c*D),t[14]=-(h*I+f*m+x*D),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t[9]=a[9]+n[9],t[10]=a[10]+n[10],t[11]=a[11]+n[11],t[12]=a[12]+n[12],t[13]=a[13]+n[13],t[14]=a[14]+n[14],t[15]=a[15]+n[15],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t[9]=a[9]-n[9],t[10]=a[10]-n[10],t[11]=a[11]-n[11],t[12]=a[12]-n[12],t[13]=a[13]-n[13],t[14]=a[14]-n[14],t[15]=a[15]-n[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t[9]=a[9]*n,t[10]=a[10]*n,t[11]=a[11]*n,t[12]=a[12]*n,t[13]=a[13]*n,t[14]=a[14]*n,t[15]=a[15]*n,t},o.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t[6]=a[6]+n[6]*r,t[7]=a[7]+n[7]*r,t[8]=a[8]+n[8]*r,t[9]=a[9]+n[9]*r,t[10]=a[10]+n[10]*r,t[11]=a[11]+n[11]*r,t[12]=a[12]+n[12]*r,t[13]=a[13]+n[13]*r,t[14]=a[14]+n[14]*r,t[15]=a[15]+n[15]*r,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},o.equals=function(t,a){var n=t[0],o=t[1],e=t[2],u=t[3],l=t[4],i=t[5],s=t[6],M=t[7],c=t[8],h=t[9],f=t[10],x=t[11],S=t[12],I=t[13],m=t[14],D=t[15],d=a[0],F=a[1],v=a[2],b=a[3],p=a[4],w=a[5],y=a[6],z=a[7],E=a[8],_=a[9],P=a[10],A=a[11],O=a[12],g=a[13],q=a[14],R=a[15];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-F)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(e-v)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(l-p)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(M-z)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(z))&&Math.abs(c-E)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-_)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(f-P)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(x-A)<=r.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(S-O)<=r.EPSILON*Math.max(1,Math.abs(S),Math.abs(O))&&Math.abs(I-g)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(g))&&Math.abs(m-q)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(D-R)<=r.EPSILON*Math.max(1,Math.abs(D),Math.abs(R))},t.exports=o},function(t,a,n){var r=n(6),o=n(9),e=n(12),u=n(13),l={};l.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.rotationTo=function(){var t=e.create(),a=e.fromValues(1,0,0),n=e.fromValues(0,1,0);return function(r,o,u){var i=e.dot(o,u);return i<-.999999?(e.cross(t,a,o),e.length(t)<1e-6&&e.cross(t,n,o),e.normalize(t,t),l.setAxisAngle(r,t,Math.PI),r):i>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(e.cross(t,o,u),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+i,l.normalize(r,r))}}(),l.setAxes=function(){var t=o.create();return function(a,n,r,o){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],l.normalize(a,l.fromMat3(a,t))}}(),l.clone=u.clone,l.fromValues=u.fromValues,l.copy=u.copy,l.set=u.set,l.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.setAxisAngle=function(t,a,n){n*=.5;var r=Math.sin(n);return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=Math.cos(n),t},l.getAxisAngle=function(t,a){var n=2*Math.acos(a[3]),r=Math.sin(n/2);return 0!=r?(t[0]=a[0]/r,t[1]=a[1]/r,t[2]=a[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},l.add=u.add,l.multiply=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3],l=n[0],i=n[1],s=n[2],M=n[3];return t[0]=r*M+u*l+o*s-e*i,t[1]=o*M+u*i+e*l-r*s,t[2]=e*M+u*s+r*i-o*l,t[3]=u*M-r*l-o*i-e*s,t},l.mul=l.multiply,l.scale=u.scale,l.rotateX=function(t,a,n){n*=.5;var r=a[0],o=a[1],e=a[2],u=a[3],l=Math.sin(n),i=Math.cos(n);return t[0]=r*i+u*l,t[1]=o*i+e*l,t[2]=e*i-o*l,t[3]=u*i-r*l,t},l.rotateY=function(t,a,n){n*=.5;var r=a[0],o=a[1],e=a[2],u=a[3],l=Math.sin(n),i=Math.cos(n);return t[0]=r*i-e*l,t[1]=o*i+u*l,t[2]=e*i+r*l,t[3]=u*i-o*l,t},l.rotateZ=function(t,a,n){n*=.5;var r=a[0],o=a[1],e=a[2],u=a[3],l=Math.sin(n),i=Math.cos(n);return t[0]=r*i+o*l,t[1]=o*i-r*l,t[2]=e*i+u*l,t[3]=u*i-e*l,t},l.calculateW=function(t,a){var n=a[0],r=a[1],o=a[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},l.dot=u.dot,l.lerp=u.lerp,l.slerp=function(t,a,n,r){var o,e,u,l,i,s=a[0],M=a[1],c=a[2],h=a[3],f=n[0],x=n[1],S=n[2],I=n[3];return e=s*f+M*x+c*S+h*I,e<0&&(e=-e,f=-f,x=-x,S=-S,I=-I),1-e>1e-6?(o=Math.acos(e),u=Math.sin(o),l=Math.sin((1-r)*o)/u,i=Math.sin(r*o)/u):(l=1-r,i=r),t[0]=l*s+i*f,t[1]=l*M+i*x,t[2]=l*c+i*S,t[3]=l*h+i*I,t},l.sqlerp=function(){var t=l.create(),a=l.create();return function(n,r,o,e,u,i){return l.slerp(t,r,u,i),l.slerp(a,o,e,i),l.slerp(n,t,a,2*i*(1-i)),n}}(),l.invert=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=n*n+r*r+o*o+e*e,l=u?1/u:0;return t[0]=-n*l,t[1]=-r*l,t[2]=-o*l,t[3]=e*l,t},l.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},l.length=u.length,l.len=l.length,l.squaredLength=u.squaredLength,l.sqrLen=l.squaredLength,l.normalize=u.normalize,l.fromMat3=function(t,a){var n,r=a[0]+a[4]+a[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(a[5]-a[7])*n,t[1]=(a[6]-a[2])*n,t[2]=(a[1]-a[3])*n;else{var o=0;a[4]>a[0]&&(o=1),a[8]>a[3*o+o]&&(o=2);var e=(o+1)%3,u=(o+2)%3;n=Math.sqrt(a[3*o+o]-a[3*e+e]-a[3*u+u]+1),t[o]=.5*n,n=.5/n,t[3]=(a[3*e+u]-a[3*u+e])*n,t[e]=(a[3*e+o]+a[3*o+e])*n,t[u]=(a[3*u+o]+a[3*o+u])*n}return t},l.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},l.exactEquals=u.exactEquals,l.equals=u.equals,t.exports=l},function(t,a,n){var r=n(6),o={};o.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var a=new r.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},o.fromValues=function(t,a,n){var o=new r.ARRAY_TYPE(3);return o[0]=t,o[1]=a,o[2]=n,o},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},o.set=function(t,a,n,r){return t[0]=a,t[1]=n,t[2]=r,t},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t},o.sub=o.subtract,o.multiply=function(t,a,n){return t[0]=a[0]*n[0],t[1]=a[1]*n[1],t[2]=a[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,a,n){return t[0]=a[0]/n[0],t[1]=a[1]/n[1],t[2]=a[2]/n[2],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},o.min=function(t,a,n){return t[0]=Math.min(a[0],n[0]),t[1]=Math.min(a[1],n[1]),t[2]=Math.min(a[2],n[2]),t},o.max=function(t,a,n){return t[0]=Math.max(a[0],n[0]),t[1]=Math.max(a[1],n[1]),t[2]=Math.max(a[2],n[2]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},o.scale=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t},o.scaleAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t},o.distance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],o=a[2]-t[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],o=a[2]-t[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],n=t[1],r=t[2];return Math.sqrt(a*a+n*n+r*r)},o.len=o.length,o.squaredLength=function(t){var a=t[0],n=t[1],r=t[2];return a*a+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},o.normalize=function(t,a){var n=a[0],r=a[1],o=a[2],e=n*n+r*r+o*o;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},o.cross=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=n[0],l=n[1],i=n[2];return t[0]=o*i-e*l,t[1]=e*u-r*i,t[2]=r*l-o*u,t},o.lerp=function(t,a,n,r){var o=a[0],e=a[1],u=a[2];return t[0]=o+r*(n[0]-o),t[1]=e+r*(n[1]-e),t[2]=u+r*(n[2]-u),t},o.hermite=function(t,a,n,r,o,e){var u=e*e,l=u*(2*e-3)+1,i=u*(e-2)+e,s=u*(e-1),M=u*(3-2*e);return t[0]=a[0]*l+n[0]*i+r[0]*s+o[0]*M,t[1]=a[1]*l+n[1]*i+r[1]*s+o[1]*M,t[2]=a[2]*l+n[2]*i+r[2]*s+o[2]*M,t},o.bezier=function(t,a,n,r,o,e){var u=1-e,l=u*u,i=e*e,s=l*u,M=3*e*l,c=3*i*u,h=i*e;return t[0]=a[0]*s+n[0]*M+r[0]*c+o[0]*h,t[1]=a[1]*s+n[1]*M+r[1]*c+o[1]*h,t[2]=a[2]*s+n[2]*M+r[2]*c+o[2]*h,t},o.random=function(t,a){a=a||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,e=Math.sqrt(1-o*o)*a;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t[2]=o*a,t},o.transformMat4=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=n[3]*r+n[7]*o+n[11]*e+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*o+n[8]*e+n[12])/u,t[1]=(n[1]*r+n[5]*o+n[9]*e+n[13])/u,t[2]=(n[2]*r+n[6]*o+n[10]*e+n[14])/u,t},o.transformMat3=function(t,a,n){var r=a[0],o=a[1],e=a[2];return t[0]=r*n[0]+o*n[3]+e*n[6],t[1]=r*n[1]+o*n[4]+e*n[7],t[2]=r*n[2]+o*n[5]+e*n[8],t},o.transformQuat=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=n[0],l=n[1],i=n[2],s=n[3],M=s*r+l*e-i*o,c=s*o+i*r-u*e,h=s*e+u*o-l*r,f=-u*r-l*o-i*e;return t[0]=M*s+f*-u+c*-i-h*-l,t[1]=c*s+f*-l+h*-u-M*-i,t[2]=h*s+f*-i+M*-l-c*-u,t},o.rotateX=function(t,a,n,r){var o=[],e=[];return o[0]=a[0]-n[0],o[1]=a[1]-n[1],o[2]=a[2]-n[2],e[0]=o[0],e[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),e[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.rotateY=function(t,a,n,r){var o=[],e=[];return o[0]=a[0]-n[0],o[1]=a[1]-n[1],o[2]=a[2]-n[2],e[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),e[1]=o[1],e[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.rotateZ=function(t,a,n,r){var o=[],e=[];return o[0]=a[0]-n[0],o[1]=a[1]-n[1],o[2]=a[2]-n[2],e[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),e[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),e[2]=o[2],t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.forEach=function(){var t=o.create();return function(a,n,r,o,e,u){var l,i;for(n||(n=3),r||(r=0),i=o?Math.min(o*n+r,a.length):a.length,l=r;l<i;l+=n)t[0]=a[l],t[1]=a[l+1],t[2]=a[l+2],e(t,t,u),a[l]=t[0],a[l+1]=t[1],a[l+2]=t[2];return a}}(),o.angle=function(t,a){var n=o.fromValues(t[0],t[1],t[2]),r=o.fromValues(a[0],a[1],a[2]);o.normalize(n,n),o.normalize(r,r);var e=o.dot(n,r);return e>1?0:Math.acos(e)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},o.equals=function(t,a){var n=t[0],o=t[1],e=t[2],u=a[0],l=a[1],i=a[2];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(e-i)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))},t.exports=o},function(t,a,n){var r=n(6),o={};o.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var a=new r.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},o.fromValues=function(t,a,n,o){var e=new r.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},o.set=function(t,a,n,r,o){return t[0]=a,t[1]=n,t[2]=r,t[3]=o,t},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t},o.sub=o.subtract,o.multiply=function(t,a,n){return t[0]=a[0]*n[0],t[1]=a[1]*n[1],t[2]=a[2]*n[2],t[3]=a[3]*n[3],t},o.mul=o.multiply,o.divide=function(t,a,n){return t[0]=a[0]/n[0],t[1]=a[1]/n[1],t[2]=a[2]/n[2],t[3]=a[3]/n[3],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},o.min=function(t,a,n){return t[0]=Math.min(a[0],n[0]),t[1]=Math.min(a[1],n[1]),t[2]=Math.min(a[2],n[2]),t[3]=Math.min(a[3],n[3]),t},o.max=function(t,a,n){return t[0]=Math.max(a[0],n[0]),t[1]=Math.max(a[1],n[1]),t[2]=Math.max(a[2],n[2]),t[3]=Math.max(a[3],n[3]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},o.scale=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t},o.scaleAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t},o.distance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],o=a[2]-t[2],e=a[3]-t[3];return Math.sqrt(n*n+r*r+o*o+e*e)},o.dist=o.distance,o.squaredDistance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],o=a[2]-t[2],e=a[3]-t[3];return n*n+r*r+o*o+e*e},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(a*a+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(t){var a=t[0],n=t[1],r=t[2],o=t[3];return a*a+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},o.normalize=function(t,a){var n=a[0],r=a[1],o=a[2],e=a[3],u=n*n+r*r+o*o+e*e;return u>0&&(u=1/Math.sqrt(u),t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=e*u),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},o.lerp=function(t,a,n,r){var o=a[0],e=a[1],u=a[2],l=a[3];return t[0]=o+r*(n[0]-o),t[1]=e+r*(n[1]-e),t[2]=u+r*(n[2]-u),t[3]=l+r*(n[3]-l),t},o.random=function(t,a){return a=a||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),o.normalize(t,t),o.scale(t,t,a),t},o.transformMat4=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=a[3];return t[0]=n[0]*r+n[4]*o+n[8]*e+n[12]*u,t[1]=n[1]*r+n[5]*o+n[9]*e+n[13]*u,t[2]=n[2]*r+n[6]*o+n[10]*e+n[14]*u,t[3]=n[3]*r+n[7]*o+n[11]*e+n[15]*u,t},o.transformQuat=function(t,a,n){var r=a[0],o=a[1],e=a[2],u=n[0],l=n[1],i=n[2],s=n[3],M=s*r+l*e-i*o,c=s*o+i*r-u*e,h=s*e+u*o-l*r,f=-u*r-l*o-i*e;return t[0]=M*s+f*-u+c*-i-h*-l,t[1]=c*s+f*-l+h*-u-M*-i,t[2]=h*s+f*-i+M*-l-c*-u,t[3]=a[3],t},o.forEach=function(){var t=o.create();return function(a,n,r,o,e,u){var l,i;for(n||(n=4),r||(r=0),i=o?Math.min(o*n+r,a.length):a.length,l=r;l<i;l+=n)t[0]=a[l],t[1]=a[l+1],t[2]=a[l+2],t[3]=a[l+3],e(t,t,u),a[l]=t[0],a[l+1]=t[1],a[l+2]=t[2],a[l+3]=t[3];return a}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},o.equals=function(t,a){var n=t[0],o=t[1],e=t[2],u=t[3],l=a[0],i=a[1],s=a[2],M=a[3];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(e-s)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},t.exports=o},function(t,a,n){var r=n(6),o={};o.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var a=new r.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},o.fromValues=function(t,a){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=a,n},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},o.set=function(t,a,n){return t[0]=a,t[1]=n,t},o.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t},o.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t},o.sub=o.subtract,o.multiply=function(t,a,n){return t[0]=a[0]*n[0],t[1]=a[1]*n[1],t},o.mul=o.multiply,o.divide=function(t,a,n){return t[0]=a[0]/n[0],t[1]=a[1]/n[1],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},o.min=function(t,a,n){return t[0]=Math.min(a[0],n[0]),t[1]=Math.min(a[1],n[1]),t},o.max=function(t,a,n){return t[0]=Math.max(a[0],n[0]),t[1]=Math.max(a[1],n[1]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},o.scale=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t},o.scaleAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t},o.distance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],n=t[1];return Math.sqrt(a*a+n*n)},o.len=o.length,o.squaredLength=function(t){var a=t[0],n=t[1];return a*a+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},o.normalize=function(t,a){var n=a[0],r=a[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},o.cross=function(t,a,n){var r=a[0]*n[1]-a[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},o.lerp=function(t,a,n,r){var o=a[0],e=a[1];return t[0]=o+r*(n[0]-o),t[1]=e+r*(n[1]-e),t},o.random=function(t,a){a=a||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t},o.transformMat2=function(t,a,n){var r=a[0],o=a[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},o.transformMat2d=function(t,a,n){var r=a[0],o=a[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},o.transformMat3=function(t,a,n){var r=a[0],o=a[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},o.transformMat4=function(t,a,n){var r=a[0],o=a[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},o.forEach=function(){var t=o.create();return function(a,n,r,o,e,u){var l,i;for(n||(n=2),r||(r=0),i=o?Math.min(o*n+r,a.length):a.length,l=r;l<i;l+=n)t[0]=a[l],t[1]=a[l+1],e(t,t,u),a[l]=t[0],a[l+1]=t[1];return a}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},o.equals=function(t,a){var n=t[0],o=t[1],e=a[0],u=a[1];return Math.abs(n-e)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=o},function(t,a){function n(t){var a="";return a+=t[0].toFixed(20)+",",a+=t[1].toFixed(20)+",",a+=t[2].toFixed(20)+",",a+=t[3].toFixed(20)+",",a+=t[4].toFixed(20)+",",a+=t[5].toFixed(20)+",",a+=t[6].toFixed(20)+",",a+=t[7].toFixed(20)+",",a+=t[8].toFixed(20)+",",a+=t[9].toFixed(20)+",",a+=t[10].toFixed(20)+",",a+=t[11].toFixed(20)+",",a+=t[12].toFixed(20)+",",a+=t[13].toFixed(20)+",",a+=t[14].toFixed(20)+",",a+=t[15].toFixed(20),"matrix3d("+a+")"}t.exports=n},function(t,a){"use strict";t.exports={size:function(t,a){var n=this.dom.style;return n.transformStyle=n.webkitTransformStyle="preserve-3d",n.width=t+"px",n.height=a+"px",this._size=[t,a],this}}},function(t,a){"use strict";t.exports={texture:function(t,a){var n=this.dom.style;return t&&(n.backgroundColor=t),a&&(n.backgroundImage="url("+a+")",n.backgroundSize="100% 100%"),this._texture=[t,a],this}}},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function e(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function u(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),i=function t(a,n,r){null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,n);if(void 0===o){var e=Object.getPrototypeOf(a);return null===e?void 0:t(e,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},s=n(3),M=r(s),c=n(19),h=r(c),f=function(t){function a(t){o(this,a);var n=e(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t)),r=n.dom.style;return r.transformStyle=r.webkitTransformStyle="preserve-3d",r.overflow="hidden",n.camera=new h.default,n.camera._scene=n,i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addChild",n).call(n,n.camera),n}return u(a,t),l(a,[{key:"getChildren",value:function(){return this.camera.children}},{key:"addChild",value:function(t){return t._isSceneObj=!0,this.camera.addChild(t),this}},{key:"removeChild",value:function(t){return this.camera.removeChild(t),this}},{key:"css",value:function(){return null}}]),a}(M.default);a.default=f},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function e(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function u(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function t(t,a){var n=[],r=!0,o=!1,e=void 0;try{for(var u,l=t[Symbol.iterator]();!(r=(u=l.next()).done)&&(n.push(u.value),!a||n.length!==a);r=!0);}catch(t){o=!0,e=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw e}}return n}return function(a,n){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return t(a,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),s=function t(a,n,r){null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,n);if(void 0===o){var e=Object.getPrototypeOf(a);return null===e?void 0:t(e,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},M=n(5),c=n(15),h=r(c),f=n(3),x=r(f),S=function(t){function a(t){o(this,a);var n=e(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));n.containerMatrix=M.mat4.create(),n.fov=45;var r=n.dom.style;return r.transformStyle=r.webkitTransformStyle="preserve-3d",r.width="100%",r.height="100%",n}return u(a,t),i(a,[{key:"perspective",value:function t(a){a=a||this.fov;var n=this._scene;if(n){var t=.5*n._size[1]/Math.tan(.5*a/180*Math.PI);this._perspective=t,n.dom.style.perspective=n.dom.style.webkitPerspective=t+"px"}return this}},{key:"rotate",value:function(t,n){var r=l(this.position,3),o=r[0],e=r[1],u=r[2];return this.translate([-o,-e,-u]),s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"rotate",this).call(this,t,n),this.translate([o,e,u]),this}},{key:"rotateTo",value:function(t){var a=l(this.position,3),n=a[0],r=a[1],o=a[2];return void 0===t?this:(this.translate([-n,-r,-o]),this.euler=[t[0],t[1],t[2]],this.translate([n,r,o]),this)}},{key:"lookAt",value:function(){M.mat4.lookAt(this.mat,eye,center,up)}},{key:"css",value:function(){M.mat4.invert(this.containerMatrix,this.mat);var t="translate3d(0,0,"+this._perspective+"px) ",a=this.containerMatrix;return a[1]=-a[1],a[5]=-a[5],a[9]=-a[9],a[13]=-a[13],t+=(0,h.default)(a),t+=" translate3d(50%, 50%, 0)"}}]),a}(x.default);a.default=S}])});