!function(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define("CSS3D",[],a):"object"==typeof exports?exports.CSS3D=a():t.CSS3D=a()}(this,function(){return function(t){function a(r){if(n[r])return n[r].exports;var e=n[r]={exports:{},id:r,loaded:!1};return t[r].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var n={};return a.m=t,a.c=n,a.p="",a(0)}([function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function e(t,a){var n=window.innerWidth,r=a/2/n;return t/=r}function o(){var t=i(d.camera.euler,2),a=t[0],n=t[1];n>Math.PI/30?x>0&&(x=0):n<-Math.PI/30&&x<0&&(x=0),a>Math.PI/30?m>0&&(m=0):a<-Math.PI/30&&m<0&&(m=0),d.camera.rotateTo([a+m,n+x,0]),I.forEach(function(t){t.rotateTo([t.euler[0]+m,t.euler[1]+x,0])}),d.render()}function u(){o(),requestAnimationFrame(u)}var i=function(){function t(t,a){var n=[],r=!0,e=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!a||n.length!==a);r=!0);}catch(t){e=!0,o=t}finally{try{!r&&i.return&&i.return()}finally{if(e)throw o}}return n}return function(a,n){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return t(a,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n(1);var l=n(2),s=n(20),c=r(s),M=(document.documentElement,{catLeft:"//gw.alicdn.com/mt/TB1W5PxOVXXXXXWXFXXXXXXXXXX-330-354.png",catRight:"//gw.alicdn.com/mt/TB1ZUbuOVXXXXbHXFXXXXXXXXXX-262-295.png",deskUp:"//gw.alicdn.com/mt/TB1t8_AOVXXXXcWXpXXXXXXXXXX-1015-322.png",deskDown:"//gw.alicdn.com/mt/TB1FAHpOVXXXXanXVXXXXXXXXXX-1021-315.png",lantern:"//gw.alicdn.com/mt/TB1O9voOVXXXXczXFXXXXXXXXXX-166-232.png",blurLeft:"//gw.alicdn.com/mt/TB1bHYLOVXXXXb5XXXXXXXXXXXX-208-92.png",blurRight:"//gw.alicdn.com/mt/TB1f8LCOVXXXXa_XpXXXXXXXXXX-312-115.png",card1:"//gw.alicdn.com/mt/TB1TkjDOVXXXXaCXpXXXXXXXXXX-128-175.png",card2:"//gw.alicdn.com/mt/TB1h7u8OVXXXXbWapXXXXXXXXXX-131-192.png",card3:"//gw.alicdn.com/mt/TB1I5PCOVXXXXcZXpXXXXXXXXXX-143-178.png",card4:"//gw.alicdn.com/mt/TB15vYsOVXXXXX5XVXXXXXXXXXX-109-176.png",card5:"//gw.alicdn.com/mt/TB1Rge_OVXXXXcdapXXXXXXXXXX-173-210.png",card6:"//gw.alicdn.com/mt/TB193HQOVXXXXX8XXXXXXXXXXXX-126-171.png",card7:"//gw.alicdn.com/mt/TB1ZHPuOVXXXXXeXVXXXXXXXXXX-158-206.png"}),h=window.innerWidth,f=window.innerHeight,d=(new l.Scene).size(h,f),m=0,x=0,S=(new c.default(d.dom).panSetup(.005,.01).onPan(function(t,a){m=a,x=t}),[{size:[e(1015,1334),e(322,1334)],texture:M.deskUp,translate:[0,0,0]},{size:[e(1021,1334),e(300,1334)],texture:M.deskDown,translate:[0,-e(225,1334),e(133,1334)],rotate:[Math.PI/3,0,0]},{size:[e(128,1334),e(175,1334)],texture:M.card1,translate:[-e(100,1334),-e(100,1334),e(100,1334)]},{size:[e(131,1334),e(192,1334)],texture:M.card2,translate:[-e(185,1334),-e(100,1334),e(105,1334)]},{size:[e(143,1334),e(178,1334)],texture:M.card3,translate:[e(160,1334),-e(100,1334),e(100,1334)]},{size:[e(109,1334),e(176,1334)],texture:M.card4,translate:[e(200,1334),-e(100,1334),e(100,1334)]},{size:[e(173,1334),e(210,1334)],texture:M.card5,translate:[-e(310,1334),-e(100,1334),e(100,1334)]},{size:[e(126,1334),e(171,1334)],texture:M.card6,translate:[e(30,1334),-e(100,1334),e(105,1334)]},{size:[e(158,1334),e(206,1334)],texture:M.card7,translate:[e(350,1334),-e(100,1334),e(100,1334)]}]),I=[];S.forEach(function(t,a){var n=(new l.Obj).size(t.size[0],t.size[1]).texture(null,t.texture).translateTo(t.translate);t.rotate&&n.rotateTo(t.rotate),d.addChild(n),a>1&&I.push(n)}),d.dom.style.width=h+"px",d.dom.style.height=f+"px",document.querySelector("#scene").appendChild(d.dom),d.camera.perspective(45).translateTo([0,80,2e3]),requestAnimationFrame(u)},function(t,a){},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var e=n(3),o=r(e),u=n(18),i=r(u);t.exports={Obj:o.default,Scene:i.default}},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),u=n(4),i=r(u),l=n(16),s=r(l),c=n(17),M=r(c),h=function(){function t(a){e(this,t),a||(a={}),this.dom=document.createElement(a.htmlTag||"div"),this.dom.style.position="absolute",this.docfrag=document.createDocumentFragment(),this.children=[],this._isDomInserted=!1,this._position(),this._rotation()}return o(t,null,[{key:"implements",value:function(a){for(var n in a)t.prototype[n]=a[n]}}]),o(t,[{key:"render",value:function(){this._isDomInserted||(this.dom.appendChild(this.docfrag),this._isDomInserted=!0),this.children&&this.children.length>0&&this.children.forEach(function(t){t.render()}),this.dom.style.transform=this.dom.style.webkitTransform=this.css()}},{key:"getChildren",value:function(){return this.children}},{key:"addChild",value:function(t){return this._isDomInserted?this.dom.appendChild(t.dom):this.docfrag.appendChild(t.dom),this.children.push(t),this}},{key:"removeChild",value:function(t){return this}}]),t}();a.default=h,h.implements(i.default),h.implements(s.default),h.implements(M.default)},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var e=n(5),o=n(15),u=r(o);t.exports={scale:function(t){var a=this.mat;return e.mat4.scale(a,a,t),this},_position:function(){var t=this;return this.mat=e.mat4.create(),this._position=[0,0,0],this.up=[0,1,0],Object.defineProperties(this,{position:{set:function(a){t.mat[12]=a[0],t.mat[13]=a[1],t.mat[14]=a[2],t._position=a},get:function(){return t._position}}}),this},translateTo:function(t){return t?(this.position=[t[0],t[1],t[2]],this):this},translate:function(t){if(!t)return this;var a=this.mat,n=this._position;return e.mat4.translate(a,a,t),t.forEach(function(a,r){n[r]+=t[r]}),this},_getQuaternionsFromEuler:function(t){var a=Math.cos,n=Math.sin,r=t[0],e=t[1],o=t[2],u=a(.5*o),i=n(.5*o),l=a(.5*r),s=n(.5*r),c=a(.5*e),M=n(.5*e),h=u*l*c+i*s*M,f=-(u*s*c-i*l*M),d=-(u*l*M+i*s*c),m=-(i*l*c-u*s*M);return[f,d,m,h]},_rotation:function(){var t=this;this.quaternion=[0,0,0,0],this._euler=[0,0,0],Object.defineProperties(this,{euler:{set:function(a){var n=t._getQuaternionsFromEuler(a);e.mat4.create();e.mat4.fromRotationTranslation(t.mat,n,[t.mat[12],t.mat[13],t.mat[14]]),t._euler=a},get:function(){return t._euler}}})},_getQuaternionFromMatrix:function(t){var a=e.quat.create();return e.mat4.getRotation(a,t||this.mat),a},_getEulerFromQuaternion:function(t){var a=t[1]*t[1],n=2*(t[3]*t[0]+t[1]*t[2]),r=1-2*(t[0]*t[0]+a),e=Math.atan2(n,r),o=2*(t[3]*t[1]-t[2]*t[0]);o=o>1?1:o,o=o<-1?-1:o;var u=Math.asin(o),i=2*(t[3]*t[2]+t[0]*t[1]),l=1-2*(a+t[2]*t[2]),s=Math.atan2(i,l);return[e,u,s]},rotateTo:function(t){return void 0===t?this:(this.euler=[t[0],t[1],t[2]],this)},rotate:function(t,a){if(void 0===t)return this;var n=this.mat;return e.mat4.rotate(n,n,t,a),this.quaternion=this._getQuaternionFromMatrix(),this._euler=this._getEulerFromQuaternion(this.quaternion),this},lookAt:function(t){var a=e.mat4.create();return e.mat4.lookAt(a,t,this._position,this.up),e.mat4.translate(a,a,[this.mat[12],this.mat[13],this.mat[14]]),e.mat4.copy(this.mat,a),this.quaternion=this._getQuaternionFromMatrix(),this._euler=this._getEulerFromQuaternion(this.quaternion),this},matrix:function(t){return this.mat=t,this},css:function(){var t="",a=e.mat4.create();return e.mat4.copy(a,this.mat),this._isSceneObj&&(t="translate3d(-50%,-50%,0) ",a[4]=-a[4],a[5]=-a[5],a[6]=-a[6],a[7]=-a[7]),t+=(0,u.default)(a)}}},function(t,a,n){a.glMatrix=n(6),a.mat2=n(7),a.mat2d=n(8),a.mat3=n(9),a.mat4=n(10),a.quat=n(11),a.vec2=n(14),a.vec3=n(12),a.vec4=n(13)},function(t,a){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var r=Math.PI/180;n.toRadian=function(t){return t*r},n.equals=function(t,a){return Math.abs(t-a)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=n},function(t,a,n){var r=n(6),e={};e.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var a=new r.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,a,n,e){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=n,o[3]=e,o},e.set=function(t,a,n,r,e){return t[0]=a,t[1]=n,t[2]=r,t[3]=e,t},e.transpose=function(t,a){if(t===a){var n=a[1];t[1]=a[2],t[2]=n}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},e.invert=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=n*o-e*r;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-e*u,t[3]=n*u,t):null},e.adjoint=function(t,a){var n=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=n[0],l=n[1],s=n[2],c=n[3];return t[0]=r*i+o*l,t[1]=e*i+u*l,t[2]=r*s+o*c,t[3]=e*s+u*c,t},e.mul=e.multiply,e.rotate=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*i,t[1]=e*l+u*i,t[2]=r*-i+o*l,t[3]=e*-i+u*l,t},e.scale=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=n[0],l=n[1];return t[0]=r*i,t[1]=e*i,t[2]=o*l,t[3]=u*l,t},e.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,a,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,a,n]},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t},e.sub=e.subtract,e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},e.equals=function(t,a){var n=t[0],e=t[1],o=t[2],u=t[3],i=a[0],l=a[1],s=a[2],c=a[3];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-l)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(u-c)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))},e.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t},e.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t},t.exports=e},function(t,a,n){var r=n(6),e={};e.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var a=new r.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,a,n,e,o,u){var i=new r.ARRAY_TYPE(6);return i[0]=t,i[1]=a,i[2]=n,i[3]=e,i[4]=o,i[5]=u,i},e.set=function(t,a,n,r,e,o,u){return t[0]=a,t[1]=n,t[2]=r,t[3]=e,t[4]=o,t[5]=u,t},e.invert=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=a[4],i=a[5],l=n*o-r*e;return l?(l=1/l,t[0]=o*l,t[1]=-r*l,t[2]=-e*l,t[3]=n*l,t[4]=(e*i-o*u)*l,t[5]=(r*u-n*i)*l,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=n[0],c=n[1],M=n[2],h=n[3],f=n[4],d=n[5];return t[0]=r*s+o*c,t[1]=e*s+u*c,t[2]=r*M+o*h,t[3]=e*M+u*h,t[4]=r*f+o*d+i,t[5]=e*f+u*d+l,t},e.mul=e.multiply,e.rotate=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*s,t[1]=e*c+u*s,t[2]=r*-s+o*c,t[3]=e*-s+u*c,t[4]=i,t[5]=l,t},e.scale=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=n[0],c=n[1];return t[0]=r*s,t[1]=e*s,t[2]=o*c,t[3]=u*c,t[4]=i,t[5]=l,t},e.translate=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=n[0],c=n[1];return t[0]=r,t[1]=e,t[2]=o,t[3]=u,t[4]=r*s+o*c+i,t[5]=e*s+u*c+l,t},e.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t},e.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},e.equals=function(t,a){var n=t[0],e=t[1],o=t[2],u=t[3],i=t[4],l=t[5],s=a[0],c=a[1],M=a[2],h=a[3],f=a[4],d=a[5];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(e-c)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(o-M)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(u-h)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(l-d)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))},t.exports=e},function(t,a,n){var r=n(6),e={};e.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},e.clone=function(t){var a=new r.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromValues=function(t,a,n,e,o,u,i,l,s){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=a,c[2]=n,c[3]=e,c[4]=o,c[5]=u,c[6]=i,c[7]=l,c[8]=s,c},e.set=function(t,a,n,r,e,o,u,i,l,s){return t[0]=a,t[1]=n,t[2]=r,t[3]=e,t[4]=o,t[5]=u,t[6]=i,t[7]=l,t[8]=s,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,a){if(t===a){var n=a[1],r=a[2],e=a[5];t[1]=a[3],t[2]=a[6],t[3]=n,t[5]=a[7],t[6]=r,t[7]=e}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},e.invert=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=a[4],i=a[5],l=a[6],s=a[7],c=a[8],M=c*u-i*s,h=-c*o+i*l,f=s*o-u*l,d=n*M+r*h+e*f;return d?(d=1/d,t[0]=M*d,t[1]=(-c*r+e*s)*d,t[2]=(i*r-e*u)*d,t[3]=h*d,t[4]=(c*n-e*l)*d,t[5]=(-i*n+e*o)*d,t[6]=f*d,t[7]=(-s*n+r*l)*d,t[8]=(u*n-r*o)*d,t):null},e.adjoint=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=a[4],i=a[5],l=a[6],s=a[7],c=a[8];return t[0]=u*c-i*s,t[1]=e*s-r*c,t[2]=r*i-e*u,t[3]=i*l-o*c,t[4]=n*c-e*l,t[5]=e*o-n*i,t[6]=o*s-u*l,t[7]=r*l-n*s,t[8]=n*u-r*o,t},e.determinant=function(t){var a=t[0],n=t[1],r=t[2],e=t[3],o=t[4],u=t[5],i=t[6],l=t[7],s=t[8];return a*(s*o-u*l)+n*(-s*e+u*i)+r*(l*e-o*i)},e.multiply=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=a[6],c=a[7],M=a[8],h=n[0],f=n[1],d=n[2],m=n[3],x=n[4],S=n[5],I=n[6],D=n[7],p=n[8];return t[0]=h*r+f*u+d*s,t[1]=h*e+f*i+d*c,t[2]=h*o+f*l+d*M,t[3]=m*r+x*u+S*s,t[4]=m*e+x*i+S*c,t[5]=m*o+x*l+S*M,t[6]=I*r+D*u+p*s,t[7]=I*e+D*i+p*c,t[8]=I*o+D*l+p*M,t},e.mul=e.multiply,e.translate=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=a[6],c=a[7],M=a[8],h=n[0],f=n[1];return t[0]=r,t[1]=e,t[2]=o,t[3]=u,t[4]=i,t[5]=l,t[6]=h*r+f*u+s,t[7]=h*e+f*i+c,t[8]=h*o+f*l+M,t},e.rotate=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=a[6],c=a[7],M=a[8],h=Math.sin(n),f=Math.cos(n);return t[0]=f*r+h*u,t[1]=f*e+h*i,t[2]=f*o+h*l,t[3]=f*u-h*r,t[4]=f*i-h*e,t[5]=f*l-h*o,t[6]=s,t[7]=c,t[8]=M,t},e.scale=function(t,a,n){var r=n[0],e=n[1];return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=e*a[3],t[4]=e*a[4],t[5]=e*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},e.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},e.fromQuat=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=n+n,i=r+r,l=e+e,s=n*u,c=r*u,M=r*i,h=e*u,f=e*i,d=e*l,m=o*u,x=o*i,S=o*l;return t[0]=1-M-d,t[3]=c-S,t[6]=h+x,t[1]=c+S,t[4]=1-s-d,t[7]=f-m,t[2]=h-x,t[5]=f+m,t[8]=1-s-M,t},e.normalFromMat4=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=a[4],i=a[5],l=a[6],s=a[7],c=a[8],M=a[9],h=a[10],f=a[11],d=a[12],m=a[13],x=a[14],S=a[15],I=n*i-r*u,D=n*l-e*u,p=n*s-o*u,v=r*l-e*i,F=r*s-o*i,b=e*s-o*l,X=c*m-M*d,w=c*x-h*d,y=c*S-f*d,_=M*x-h*m,z=M*S-f*m,g=h*S-f*x,E=I*g-D*z+p*_+v*y-F*w+b*X;return E?(E=1/E,t[0]=(i*g-l*z+s*_)*E,t[1]=(l*y-u*g-s*w)*E,t[2]=(u*z-i*y+s*X)*E,t[3]=(e*z-r*g-o*_)*E,t[4]=(n*g-e*y+o*w)*E,t[5]=(r*y-n*z-o*X)*E,t[6]=(m*b-x*F+S*v)*E,t[7]=(x*p-d*b-S*D)*E,t[8]=(d*F-m*p+S*I)*E,t):null},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t},e.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t[6]=a[6]+n[6]*r,t[7]=a[7]+n[7]*r,t[8]=a[8]+n[8]*r,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},e.equals=function(t,a){var n=t[0],e=t[1],o=t[2],u=t[3],i=t[4],l=t[5],s=t[6],c=t[7],M=t[8],h=a[0],f=a[1],d=a[2],m=a[3],x=a[4],S=a[5],I=t[6],D=a[7],p=a[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-f)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(s-I)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(c-D)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(M-p)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(p))},t.exports=e},function(t,a,n){var r=n(6),e={scalar:{},SIMD:{}};e.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var a=new r.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.fromValues=function(t,a,n,e,o,u,i,l,s,c,M,h,f,d,m,x){var S=new r.ARRAY_TYPE(16);return S[0]=t,S[1]=a,S[2]=n,S[3]=e,S[4]=o,S[5]=u,S[6]=i,S[7]=l,S[8]=s,S[9]=c,S[10]=M,S[11]=h,S[12]=f,S[13]=d,S[14]=m,S[15]=x,S},e.set=function(t,a,n,r,e,o,u,i,l,s,c,M,h,f,d,m,x){return t[0]=a,t[1]=n,t[2]=r,t[3]=e,t[4]=o,t[5]=u,t[6]=i,t[7]=l,t[8]=s,t[9]=c,t[10]=M,t[11]=h,t[12]=f,t[13]=d,t[14]=m,t[15]=x,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.scalar.transpose=function(t,a){if(t===a){var n=a[1],r=a[2],e=a[3],o=a[6],u=a[7],i=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=n,t[6]=a[9],t[7]=a[13],t[8]=r,t[9]=o,t[11]=a[14],t[12]=e,t[13]=u,t[14]=i}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},e.SIMD.transpose=function(t,a){var n,r,e,o,u,i,l,s,c,M;return n=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.shuffle(n,r,0,1,4,5),i=SIMD.Float32x4.shuffle(e,o,0,1,4,5),l=SIMD.Float32x4.shuffle(u,i,0,2,4,6),s=SIMD.Float32x4.shuffle(u,i,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),u=SIMD.Float32x4.shuffle(n,r,2,3,6,7),i=SIMD.Float32x4.shuffle(e,o,2,3,6,7),c=SIMD.Float32x4.shuffle(u,i,0,2,4,6),M=SIMD.Float32x4.shuffle(u,i,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,M),t},e.transpose=r.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=a[4],i=a[5],l=a[6],s=a[7],c=a[8],M=a[9],h=a[10],f=a[11],d=a[12],m=a[13],x=a[14],S=a[15],I=n*i-r*u,D=n*l-e*u,p=n*s-o*u,v=r*l-e*i,F=r*s-o*i,b=e*s-o*l,X=c*m-M*d,w=c*x-h*d,y=c*S-f*d,_=M*x-h*m,z=M*S-f*m,g=h*S-f*x,E=I*g-D*z+p*_+v*y-F*w+b*X;return E?(E=1/E,t[0]=(i*g-l*z+s*_)*E,t[1]=(e*z-r*g-o*_)*E,t[2]=(m*b-x*F+S*v)*E,t[3]=(h*F-M*b-f*v)*E,t[4]=(l*y-u*g-s*w)*E,t[5]=(n*g-e*y+o*w)*E,t[6]=(x*p-d*b-S*D)*E,t[7]=(c*b-h*p+f*D)*E,t[8]=(u*z-i*y+s*X)*E,t[9]=(r*y-n*z-o*X)*E,t[10]=(d*F-m*p+S*I)*E,t[11]=(M*p-c*F-f*I)*E,t[12]=(i*w-u*_-l*X)*E,t[13]=(n*_-r*w+e*X)*E,t[14]=(m*D-d*v-x*I)*E,t[15]=(c*v-M*D+h*I)*E,t):null},e.SIMD.invert=function(t,a){var n,r,e,o,u,i,l,s,c,M,h=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),d=SIMD.Float32x4.load(a,8),m=SIMD.Float32x4.load(a,12);return u=SIMD.Float32x4.shuffle(h,f,0,1,4,5),r=SIMD.Float32x4.shuffle(d,m,0,1,4,5),n=SIMD.Float32x4.shuffle(u,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,u,1,3,5,7),u=SIMD.Float32x4.shuffle(h,f,2,3,6,7),o=SIMD.Float32x4.shuffle(d,m,2,3,6,7),e=SIMD.Float32x4.shuffle(u,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,u,1,3,5,7),u=SIMD.Float32x4.mul(e,o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),i=SIMD.Float32x4.mul(r,u),l=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),i),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.mul(r,e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),i),c=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,u)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),i),s=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,u)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.mul(n,r),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,u),c),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,u),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,u)),u=SIMD.Float32x4.mul(n,o),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,u)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,u),s),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,u),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,u)),u=SIMD.Float32x4.mul(n,e),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,u),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,u)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,u),c),M=SIMD.Float32x4.mul(n,i),M=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(M,2,3,0,1),M),M=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(M,1,0,3,2),M),u=SIMD.Float32x4.reciprocalApproximation(M),M=SIMD.Float32x4.sub(SIMD.Float32x4.add(u,u),SIMD.Float32x4.mul(M,SIMD.Float32x4.mul(u,u))),(M=SIMD.Float32x4.swizzle(M,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(M,i)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(M,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(M,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(M,c)),t):null},e.invert=r.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=a[4],i=a[5],l=a[6],s=a[7],c=a[8],M=a[9],h=a[10],f=a[11],d=a[12],m=a[13],x=a[14],S=a[15];return t[0]=i*(h*S-f*x)-M*(l*S-s*x)+m*(l*f-s*h),t[1]=-(r*(h*S-f*x)-M*(e*S-o*x)+m*(e*f-o*h)),t[2]=r*(l*S-s*x)-i*(e*S-o*x)+m*(e*s-o*l),t[3]=-(r*(l*f-s*h)-i*(e*f-o*h)+M*(e*s-o*l)),t[4]=-(u*(h*S-f*x)-c*(l*S-s*x)+d*(l*f-s*h)),t[5]=n*(h*S-f*x)-c*(e*S-o*x)+d*(e*f-o*h),t[6]=-(n*(l*S-s*x)-u*(e*S-o*x)+d*(e*s-o*l)),t[7]=n*(l*f-s*h)-u*(e*f-o*h)+c*(e*s-o*l),t[8]=u*(M*S-f*m)-c*(i*S-s*m)+d*(i*f-s*M),t[9]=-(n*(M*S-f*m)-c*(r*S-o*m)+d*(r*f-o*M)),t[10]=n*(i*S-s*m)-u*(r*S-o*m)+d*(r*s-o*i),t[11]=-(n*(i*f-s*M)-u*(r*f-o*M)+c*(r*s-o*i)),t[12]=-(u*(M*x-h*m)-c*(i*x-l*m)+d*(i*h-l*M)),t[13]=n*(M*x-h*m)-c*(r*x-e*m)+d*(r*h-e*M),t[14]=-(n*(i*x-l*m)-u*(r*x-e*m)+d*(r*l-e*i)),t[15]=n*(i*h-l*M)-u*(r*h-e*M)+c*(r*l-e*i),t},e.SIMD.adjoint=function(t,a){var n,r,e,o,u,i,l,s,c,M,h,f,d,n=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),i=SIMD.Float32x4.shuffle(e,o,0,1,4,5),u=SIMD.Float32x4.shuffle(c,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(e,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.mul(i,c),h=SIMD.Float32x4.mul(u,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.mul(u,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),M),f=SIMD.Float32x4.mul(u,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(l,c)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(u,i),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,c),f),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(i,c)),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(i,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,c),d),SIMD.Float32x4.store(t,0,M),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,d),t},e.adjoint=r.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(t){var a=t[0],n=t[1],r=t[2],e=t[3],o=t[4],u=t[5],i=t[6],l=t[7],s=t[8],c=t[9],M=t[10],h=t[11],f=t[12],d=t[13],m=t[14],x=t[15],S=a*u-n*o,I=a*i-r*o,D=a*l-e*o,p=n*i-r*u,v=n*l-e*u,F=r*l-e*i,b=s*d-c*f,X=s*m-M*f,w=s*x-h*f,y=c*m-M*d,_=c*x-h*d,z=M*x-h*m;return S*z-I*_+D*y+p*w-v*X+F*b},e.SIMD.multiply=function(t,a,n){var r=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),u=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,3,3,3,3),u))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),u))));SIMD.Float32x4.store(t,4,c);var M=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),u))));SIMD.Float32x4.store(t,8,h);var f=SIMD.Float32x4.load(n,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),u))));return SIMD.Float32x4.store(t,12,d),t},e.scalar.multiply=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=a[6],c=a[7],M=a[8],h=a[9],f=a[10],d=a[11],m=a[12],x=a[13],S=a[14],I=a[15],D=n[0],p=n[1],v=n[2],F=n[3];return t[0]=D*r+p*i+v*M+F*m,t[1]=D*e+p*l+v*h+F*x,t[2]=D*o+p*s+v*f+F*S,t[3]=D*u+p*c+v*d+F*I,D=n[4],p=n[5],v=n[6],F=n[7],t[4]=D*r+p*i+v*M+F*m,t[5]=D*e+p*l+v*h+F*x,t[6]=D*o+p*s+v*f+F*S,t[7]=D*u+p*c+v*d+F*I,D=n[8],p=n[9],v=n[10],F=n[11],t[8]=D*r+p*i+v*M+F*m,t[9]=D*e+p*l+v*h+F*x,t[10]=D*o+p*s+v*f+F*S,t[11]=D*u+p*c+v*d+F*I,D=n[12],p=n[13],v=n[14],F=n[15],t[12]=D*r+p*i+v*M+F*m,t[13]=D*e+p*l+v*h+F*x,t[14]=D*o+p*s+v*f+F*S,t[15]=D*u+p*c+v*d+F*I,t},e.multiply=r.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(t,a,n){var r,e,o,u,i,l,s,c,M,h,f,d,m=n[0],x=n[1],S=n[2];return a===t?(t[12]=a[0]*m+a[4]*x+a[8]*S+a[12],t[13]=a[1]*m+a[5]*x+a[9]*S+a[13],t[14]=a[2]*m+a[6]*x+a[10]*S+a[14],t[15]=a[3]*m+a[7]*x+a[11]*S+a[15]):(r=a[0],e=a[1],o=a[2],u=a[3],i=a[4],l=a[5],s=a[6],c=a[7],M=a[8],h=a[9],f=a[10],d=a[11],t[0]=r,t[1]=e,t[2]=o,t[3]=u,t[4]=i,t[5]=l,t[6]=s,t[7]=c,t[8]=M,t[9]=h,t[10]=f,t[11]=d,t[12]=r*m+i*x+M*S+a[12],t[13]=e*m+l*x+h*S+a[13],
t[14]=o*m+s*x+f*S+a[14],t[15]=u*m+c*x+d*S+a[15]),t},e.SIMD.translate=function(t,a,n){var r=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),u=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4(n[0],n[1],n[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(i,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(e,SIMD.Float32x4.add(o,u)));return SIMD.Float32x4.store(t,12,l),t},e.translate=r.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(t,a,n){var r=n[0],e=n[1],o=n[2];return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.SIMD.scale=function(t,a,n){var r,e,o,u=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0))),e=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.scale=r.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(t,a,n,e){var o,u,i,l,s,c,M,h,f,d,m,x,S,I,D,p,v,F,b,X,w,y,_,z,g=e[0],E=e[1],P=e[2],O=Math.sqrt(g*g+E*E+P*P);return Math.abs(O)<r.EPSILON?null:(O=1/O,g*=O,E*=O,P*=O,o=Math.sin(n),u=Math.cos(n),i=1-u,l=a[0],s=a[1],c=a[2],M=a[3],h=a[4],f=a[5],d=a[6],m=a[7],x=a[8],S=a[9],I=a[10],D=a[11],p=g*g*i+u,v=E*g*i+P*o,F=P*g*i-E*o,b=g*E*i-P*o,X=E*E*i+u,w=P*E*i+g*o,y=g*P*i+E*o,_=E*P*i-g*o,z=P*P*i+u,t[0]=l*p+h*v+x*F,t[1]=s*p+f*v+S*F,t[2]=c*p+d*v+I*F,t[3]=M*p+m*v+D*F,t[4]=l*b+h*X+x*w,t[5]=s*b+f*X+S*w,t[6]=c*b+d*X+I*w,t[7]=M*b+m*X+D*w,t[8]=l*y+h*_+x*z,t[9]=s*y+f*_+S*z,t[10]=c*y+d*_+I*z,t[11]=M*y+m*_+D*z,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},e.scalar.rotateX=function(t,a,n){var r=Math.sin(n),e=Math.cos(n),o=a[4],u=a[5],i=a[6],l=a[7],s=a[8],c=a[9],M=a[10],h=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+s*r,t[5]=u*e+c*r,t[6]=i*e+M*r,t[7]=l*e+h*r,t[8]=s*e-o*r,t[9]=c*e-u*r,t[10]=M*e-i*r,t[11]=h*e-l*r,t},e.SIMD.rotateX=function(t,a,n){var r=SIMD.Float32x4.splat(Math.sin(n)),e=SIMD.Float32x4.splat(Math.cos(n));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,4),u=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(u,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,e),SIMD.Float32x4.mul(o,r))),t},e.rotateX=r.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(t,a,n){var r=Math.sin(n),e=Math.cos(n),o=a[0],u=a[1],i=a[2],l=a[3],s=a[8],c=a[9],M=a[10],h=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-s*r,t[1]=u*e-c*r,t[2]=i*e-M*r,t[3]=l*e-h*r,t[8]=o*r+s*e,t[9]=u*r+c*e,t[10]=i*r+M*e,t[11]=l*r+h*e,t},e.SIMD.rotateY=function(t,a,n){var r=SIMD.Float32x4.splat(Math.sin(n)),e=SIMD.Float32x4.splat(Math.cos(n));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(u,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(u,e))),t},e.rotateY=r.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(t,a,n){var r=Math.sin(n),e=Math.cos(n),o=a[0],u=a[1],i=a[2],l=a[3],s=a[4],c=a[5],M=a[6],h=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+s*r,t[1]=u*e+c*r,t[2]=i*e+M*r,t[3]=l*e+h*r,t[4]=s*e-o*r,t[5]=c*e-u*r,t[6]=M*e-i*r,t[7]=h*e-l*r,t},e.SIMD.rotateZ=function(t,a,n){var r=SIMD.Float32x4.splat(Math.sin(n)),e=SIMD.Float32x4.splat(Math.cos(n));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(u,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,e),SIMD.Float32x4.mul(o,r))),t},e.rotateZ=r.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,a,n){var e,o,u,i=n[0],l=n[1],s=n[2],c=Math.sqrt(i*i+l*l+s*s);return Math.abs(c)<r.EPSILON?null:(c=1/c,i*=c,l*=c,s*=c,e=Math.sin(a),o=Math.cos(a),u=1-o,t[0]=i*i*u+o,t[1]=l*i*u+s*e,t[2]=s*i*u-l*e,t[3]=0,t[4]=i*l*u-s*e,t[5]=l*l*u+o,t[6]=s*l*u+i*e,t[7]=0,t[8]=i*s*u+l*e,t[9]=l*s*u-i*e,t[10]=s*s*u+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=r+r,l=e+e,s=o+o,c=r*i,M=r*l,h=r*s,f=e*l,d=e*s,m=o*s,x=u*i,S=u*l,I=u*s;return t[0]=1-(f+m),t[1]=M+I,t[2]=h-S,t[3]=0,t[4]=M-I,t[5]=1-(c+m),t[6]=d+x,t[7]=0,t[8]=h+S,t[9]=d-x,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},e.getRotation=function(t,a){var n=a[0]+a[5]+a[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(a[6]-a[9])/r,t[1]=(a[8]-a[2])/r,t[2]=(a[1]-a[4])/r):a[0]>a[5]&a[0]>a[10]?(r=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/r,t[0]=.25*r,t[1]=(a[1]+a[4])/r,t[2]=(a[8]+a[2])/r):a[5]>a[10]?(r=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/r,t[0]=(a[1]+a[4])/r,t[1]=.25*r,t[2]=(a[6]+a[9])/r):(r=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/r,t[0]=(a[8]+a[2])/r,t[1]=(a[6]+a[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,a,n,r){var e=a[0],o=a[1],u=a[2],i=a[3],l=e+e,s=o+o,c=u+u,M=e*l,h=e*s,f=e*c,d=o*s,m=o*c,x=u*c,S=i*l,I=i*s,D=i*c,p=r[0],v=r[1],F=r[2];return t[0]=(1-(d+x))*p,t[1]=(h+D)*p,t[2]=(f-I)*p,t[3]=0,t[4]=(h-D)*v,t[5]=(1-(M+x))*v,t[6]=(m+S)*v,t[7]=0,t[8]=(f+I)*F,t[9]=(m-S)*F,t[10]=(1-(M+d))*F,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,a,n,r,e){var o=a[0],u=a[1],i=a[2],l=a[3],s=o+o,c=u+u,M=i+i,h=o*s,f=o*c,d=o*M,m=u*c,x=u*M,S=i*M,I=l*s,D=l*c,p=l*M,v=r[0],F=r[1],b=r[2],X=e[0],w=e[1],y=e[2];return t[0]=(1-(m+S))*v,t[1]=(f+p)*v,t[2]=(d-D)*v,t[3]=0,t[4]=(f-p)*F,t[5]=(1-(h+S))*F,t[6]=(x+I)*F,t[7]=0,t[8]=(d+D)*b,t[9]=(x-I)*b,t[10]=(1-(h+m))*b,t[11]=0,t[12]=n[0]+X-(t[0]*X+t[4]*w+t[8]*y),t[13]=n[1]+w-(t[1]*X+t[5]*w+t[9]*y),t[14]=n[2]+y-(t[2]*X+t[6]*w+t[10]*y),t[15]=1,t},e.fromQuat=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=n+n,i=r+r,l=e+e,s=n*u,c=r*u,M=r*i,h=e*u,f=e*i,d=e*l,m=o*u,x=o*i,S=o*l;return t[0]=1-M-d,t[1]=c+S,t[2]=h-x,t[3]=0,t[4]=c-S,t[5]=1-s-d,t[6]=f+m,t[7]=0,t[8]=h+x,t[9]=f-m,t[10]=1-s-M,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,a,n,r,e,o,u){var i=1/(n-a),l=1/(e-r),s=1/(o-u);return t[0]=2*o*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+a)*i,t[9]=(e+r)*l,t[10]=(u+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*s,t[15]=0,t},e.perspective=function(t,a,n,r,e){var o=1/Math.tan(a/2),u=1/(r-e);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*r*u,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,a,n,r){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),u=Math.tan(a.leftDegrees*Math.PI/180),i=Math.tan(a.rightDegrees*Math.PI/180),l=2/(u+i),s=2/(e+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((u-i)*l*.5),t[9]=(e-o)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,a,n,r,e,o,u){var i=1/(a-n),l=1/(r-e),s=1/(o-u);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(a+n)*i,t[13]=(e+r)*l,t[14]=(u+o)*s,t[15]=1,t},e.lookAt=function(t,a,n,o){var u,i,l,s,c,M,h,f,d,m,x=a[0],S=a[1],I=a[2],D=o[0],p=o[1],v=o[2],F=n[0],b=n[1],X=n[2];return Math.abs(x-F)<r.EPSILON&&Math.abs(S-b)<r.EPSILON&&Math.abs(I-X)<r.EPSILON?e.identity(t):(h=x-F,f=S-b,d=I-X,m=1/Math.sqrt(h*h+f*f+d*d),h*=m,f*=m,d*=m,u=p*d-v*f,i=v*h-D*d,l=D*f-p*h,m=Math.sqrt(u*u+i*i+l*l),m?(m=1/m,u*=m,i*=m,l*=m):(u=0,i=0,l=0),s=f*l-d*i,c=d*u-h*l,M=h*i-f*u,m=Math.sqrt(s*s+c*c+M*M),m?(m=1/m,s*=m,c*=m,M*=m):(s=0,c=0,M=0),t[0]=u,t[1]=s,t[2]=h,t[3]=0,t[4]=i,t[5]=c,t[6]=f,t[7]=0,t[8]=l,t[9]=M,t[10]=d,t[11]=0,t[12]=-(u*x+i*S+l*I),t[13]=-(s*x+c*S+M*I),t[14]=-(h*x+f*S+d*I),t[15]=1,t)},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t[9]=a[9]+n[9],t[10]=a[10]+n[10],t[11]=a[11]+n[11],t[12]=a[12]+n[12],t[13]=a[13]+n[13],t[14]=a[14]+n[14],t[15]=a[15]+n[15],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t[9]=a[9]-n[9],t[10]=a[10]-n[10],t[11]=a[11]-n[11],t[12]=a[12]-n[12],t[13]=a[13]-n[13],t[14]=a[14]-n[14],t[15]=a[15]-n[15],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t[9]=a[9]*n,t[10]=a[10]*n,t[11]=a[11]*n,t[12]=a[12]*n,t[13]=a[13]*n,t[14]=a[14]*n,t[15]=a[15]*n,t},e.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t[6]=a[6]+n[6]*r,t[7]=a[7]+n[7]*r,t[8]=a[8]+n[8]*r,t[9]=a[9]+n[9]*r,t[10]=a[10]+n[10]*r,t[11]=a[11]+n[11]*r,t[12]=a[12]+n[12]*r,t[13]=a[13]+n[13]*r,t[14]=a[14]+n[14]*r,t[15]=a[15]+n[15]*r,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},e.equals=function(t,a){var n=t[0],e=t[1],o=t[2],u=t[3],i=t[4],l=t[5],s=t[6],c=t[7],M=t[8],h=t[9],f=t[10],d=t[11],m=t[12],x=t[13],S=t[14],I=t[15],D=a[0],p=a[1],v=a[2],F=a[3],b=a[4],X=a[5],w=a[6],y=a[7],_=a[8],z=a[9],g=a[10],E=a[11],P=a[12],O=a[13],A=a[14],T=a[15];return Math.abs(n-D)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(e-p)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(o-v)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-F)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(l-X)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(X))&&Math.abs(s-w)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(M-_)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(_))&&Math.abs(h-z)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(f-g)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(d-E)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(x-O)<=r.EPSILON*Math.max(1,Math.abs(x),Math.abs(O))&&Math.abs(S-A)<=r.EPSILON*Math.max(1,Math.abs(S),Math.abs(A))&&Math.abs(I-T)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(T))},t.exports=e},function(t,a,n){var r=n(6),e=n(9),o=n(12),u=n(13),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.rotationTo=function(){var t=o.create(),a=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,e,u){var l=o.dot(e,u);return l<-.999999?(o.cross(t,a,e),o.length(t)<1e-6&&o.cross(t,n,e),o.normalize(t,t),i.setAxisAngle(r,t,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,e,u),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+l,i.normalize(r,r))}}(),i.setAxes=function(){var t=e.create();return function(a,n,r,e){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=e[0],t[4]=e[1],t[7]=e[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],i.normalize(a,i.fromMat3(a,t))}}(),i.clone=u.clone,i.fromValues=u.fromValues,i.copy=u.copy,i.set=u.set,i.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.setAxisAngle=function(t,a,n){n*=.5;var r=Math.sin(n);return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=Math.cos(n),t},i.getAxisAngle=function(t,a){var n=2*Math.acos(a[3]),r=Math.sin(n/2);return 0!=r?(t[0]=a[0]/r,t[1]=a[1]/r,t[2]=a[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},i.add=u.add,i.multiply=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3],i=n[0],l=n[1],s=n[2],c=n[3];return t[0]=r*c+u*i+e*s-o*l,t[1]=e*c+u*l+o*i-r*s,t[2]=o*c+u*s+r*l-e*i,t[3]=u*c-r*i-e*l-o*s,t},i.mul=i.multiply,i.scale=u.scale,i.rotateX=function(t,a,n){n*=.5;var r=a[0],e=a[1],o=a[2],u=a[3],i=Math.sin(n),l=Math.cos(n);return t[0]=r*l+u*i,t[1]=e*l+o*i,t[2]=o*l-e*i,t[3]=u*l-r*i,t},i.rotateY=function(t,a,n){n*=.5;var r=a[0],e=a[1],o=a[2],u=a[3],i=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*i,t[1]=e*l+u*i,t[2]=o*l+r*i,t[3]=u*l-e*i,t},i.rotateZ=function(t,a,n){n*=.5;var r=a[0],e=a[1],o=a[2],u=a[3],i=Math.sin(n),l=Math.cos(n);return t[0]=r*l+e*i,t[1]=e*l-r*i,t[2]=o*l+u*i,t[3]=u*l-o*i,t},i.calculateW=function(t,a){var n=a[0],r=a[1],e=a[2];return t[0]=n,t[1]=r,t[2]=e,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-e*e)),t},i.dot=u.dot,i.lerp=u.lerp,i.slerp=function(t,a,n,r){var e,o,u,i,l,s=a[0],c=a[1],M=a[2],h=a[3],f=n[0],d=n[1],m=n[2],x=n[3];return o=s*f+c*d+M*m+h*x,o<0&&(o=-o,f=-f,d=-d,m=-m,x=-x),1-o>1e-6?(e=Math.acos(o),u=Math.sin(e),i=Math.sin((1-r)*e)/u,l=Math.sin(r*e)/u):(i=1-r,l=r),t[0]=i*s+l*f,t[1]=i*c+l*d,t[2]=i*M+l*m,t[3]=i*h+l*x,t},i.sqlerp=function(){var t=i.create(),a=i.create();return function(n,r,e,o,u,l){return i.slerp(t,r,u,l),i.slerp(a,e,o,l),i.slerp(n,t,a,2*l*(1-l)),n}}(),i.invert=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=n*n+r*r+e*e+o*o,i=u?1/u:0;return t[0]=-n*i,t[1]=-r*i,t[2]=-e*i,t[3]=o*i,t},i.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},i.length=u.length,i.len=i.length,i.squaredLength=u.squaredLength,i.sqrLen=i.squaredLength,i.normalize=u.normalize,i.fromMat3=function(t,a){var n,r=a[0]+a[4]+a[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(a[5]-a[7])*n,t[1]=(a[6]-a[2])*n,t[2]=(a[1]-a[3])*n;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,u=(e+2)%3;n=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*u+u]+1),t[e]=.5*n,n=.5/n,t[3]=(a[3*o+u]-a[3*u+o])*n,t[o]=(a[3*o+e]+a[3*e+o])*n,t[u]=(a[3*u+e]+a[3*e+u])*n}return t},i.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.exactEquals=u.exactEquals,i.equals=u.equals,t.exports=i},function(t,a,n){var r=n(6),e={};e.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},e.clone=function(t){var a=new r.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},e.fromValues=function(t,a,n){var e=new r.ARRAY_TYPE(3);return e[0]=t,e[1]=a,e[2]=n,e},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},e.set=function(t,a,n,r){return t[0]=a,t[1]=n,t[2]=r,t},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t},e.sub=e.subtract,e.multiply=function(t,a,n){return t[0]=a[0]*n[0],t[1]=a[1]*n[1],t[2]=a[2]*n[2],t},e.mul=e.multiply,e.divide=function(t,a,n){return t[0]=a[0]/n[0],t[1]=a[1]/n[1],t[2]=a[2]/n[2],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},e.min=function(t,a,n){return t[0]=Math.min(a[0],n[0]),t[1]=Math.min(a[1],n[1]),t[2]=Math.min(a[2],n[2]),t},e.max=function(t,a,n){return t[0]=Math.max(a[0],n[0]),t[1]=Math.max(a[1],n[1]),t[2]=Math.max(a[2],n[2]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},e.scale=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t},e.scaleAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t},e.distance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],e=a[2]-t[2];return Math.sqrt(n*n+r*r+e*e)},e.dist=e.distance,e.squaredDistance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],e=a[2]-t[2];return n*n+r*r+e*e},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],n=t[1],r=t[2];return Math.sqrt(a*a+n*n+r*r)},e.len=e.length,e.squaredLength=function(t){var a=t[0],n=t[1],r=t[2];return a*a+n*n+r*r},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},e.normalize=function(t,a){var n=a[0],r=a[1],e=a[2],o=n*n+r*r+e*e;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},e.cross=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=n[0],i=n[1],l=n[2];return t[0]=e*l-o*i,t[1]=o*u-r*l,t[2]=r*i-e*u,t},e.lerp=function(t,a,n,r){var e=a[0],o=a[1],u=a[2];return t[0]=e+r*(n[0]-e),t[1]=o+r*(n[1]-o),t[2]=u+r*(n[2]-u),t},e.hermite=function(t,a,n,r,e,o){var u=o*o,i=u*(2*o-3)+1,l=u*(o-2)+o,s=u*(o-1),c=u*(3-2*o);return t[0]=a[0]*i+n[0]*l+r[0]*s+e[0]*c,t[1]=a[1]*i+n[1]*l+r[1]*s+e[1]*c,t[2]=a[2]*i+n[2]*l+r[2]*s+e[2]*c,t},e.bezier=function(t,a,n,r,e,o){var u=1-o,i=u*u,l=o*o,s=i*u,c=3*o*i,M=3*l*u,h=l*o;return t[0]=a[0]*s+n[0]*c+r[0]*M+e[0]*h,t[1]=a[1]*s+n[1]*c+r[1]*M+e[1]*h,t[2]=a[2]*s+n[2]*c+r[2]*M+e[2]*h,t},e.random=function(t,a){a=a||1;var n=2*r.RANDOM()*Math.PI,e=2*r.RANDOM()-1,o=Math.sqrt(1-e*e)*a;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=e*a,t},e.transformMat4=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=n[3]*r+n[7]*e+n[11]*o+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*e+n[8]*o+n[12])/u,t[1]=(n[1]*r+n[5]*e+n[9]*o+n[13])/u,t[2]=(n[2]*r+n[6]*e+n[10]*o+n[14])/u,t},e.transformMat3=function(t,a,n){var r=a[0],e=a[1],o=a[2];return t[0]=r*n[0]+e*n[3]+o*n[6],t[1]=r*n[1]+e*n[4]+o*n[7],t[2]=r*n[2]+e*n[5]+o*n[8],t},e.transformQuat=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=n[0],i=n[1],l=n[2],s=n[3],c=s*r+i*o-l*e,M=s*e+l*r-u*o,h=s*o+u*e-i*r,f=-u*r-i*e-l*o;return t[0]=c*s+f*-u+M*-l-h*-i,t[1]=M*s+f*-i+h*-u-c*-l,t[2]=h*s+f*-l+c*-i-M*-u,t},e.rotateX=function(t,a,n,r){var e=[],o=[];return e[0]=a[0]-n[0],e[1]=a[1]-n[1],e[2]=a[2]-n[2],o[0]=e[0],o[1]=e[1]*Math.cos(r)-e[2]*Math.sin(r),o[2]=e[1]*Math.sin(r)+e[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,a,n,r){var e=[],o=[];return e[0]=a[0]-n[0],e[1]=a[1]-n[1],e[2]=a[2]-n[2],o[0]=e[2]*Math.sin(r)+e[0]*Math.cos(r),o[1]=e[1],o[2]=e[2]*Math.cos(r)-e[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,a,n,r){var e=[],o=[];return e[0]=a[0]-n[0],e[1]=a[1]-n[1],e[2]=a[2]-n[2],o[0]=e[0]*Math.cos(r)-e[1]*Math.sin(r),o[1]=e[0]*Math.sin(r)+e[1]*Math.cos(r),o[2]=e[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.forEach=function(){var t=e.create();return function(a,n,r,e,o,u){var i,l;for(n||(n=3),r||(r=0),l=e?Math.min(e*n+r,a.length):a.length,i=r;i<l;i+=n)t[0]=a[i],t[1]=a[i+1],t[2]=a[i+2],o(t,t,u),a[i]=t[0],a[i+1]=t[1],a[i+2]=t[2];return a}}(),e.angle=function(t,a){var n=e.fromValues(t[0],t[1],t[2]),r=e.fromValues(a[0],a[1],a[2]);e.normalize(n,n),e.normalize(r,r);var o=e.dot(n,r);return o>1?0:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},e.equals=function(t,a){var n=t[0],e=t[1],o=t[2],u=a[0],i=a[1],l=a[2];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-i)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=e},function(t,a,n){var r=n(6),e={};e.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},e.clone=function(t){var a=new r.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},e.fromValues=function(t,a,n,e){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=n,o[3]=e,o},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},e.set=function(t,a,n,r,e){return t[0]=a,t[1]=n,t[2]=r,t[3]=e,t},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t},e.sub=e.subtract,e.multiply=function(t,a,n){return t[0]=a[0]*n[0],t[1]=a[1]*n[1],t[2]=a[2]*n[2],t[3]=a[3]*n[3],t},e.mul=e.multiply,e.divide=function(t,a,n){return t[0]=a[0]/n[0],t[1]=a[1]/n[1],t[2]=a[2]/n[2],t[3]=a[3]/n[3],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},e.min=function(t,a,n){return t[0]=Math.min(a[0],n[0]),t[1]=Math.min(a[1],n[1]),t[2]=Math.min(a[2],n[2]),t[3]=Math.min(a[3],n[3]),t},e.max=function(t,a,n){return t[0]=Math.max(a[0],n[0]),t[1]=Math.max(a[1],n[1]),t[2]=Math.max(a[2],n[2]),t[3]=Math.max(a[3],n[3]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},e.scale=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t},e.scaleAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t},e.distance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(n*n+r*r+e*e+o*o)},e.dist=e.distance,e.squaredDistance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return n*n+r*r+e*e+o*o},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],n=t[1],r=t[2],e=t[3];return Math.sqrt(a*a+n*n+r*r+e*e)},e.len=e.length,e.squaredLength=function(t){var a=t[0],n=t[1],r=t[2],e=t[3];return a*a+n*n+r*r+e*e},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},e.normalize=function(t,a){var n=a[0],r=a[1],e=a[2],o=a[3],u=n*n+r*r+e*e+o*o;return u>0&&(u=1/Math.sqrt(u),t[0]=n*u,t[1]=r*u,t[2]=e*u,t[3]=o*u),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},e.lerp=function(t,a,n,r){var e=a[0],o=a[1],u=a[2],i=a[3];return t[0]=e+r*(n[0]-e),t[1]=o+r*(n[1]-o),t[2]=u+r*(n[2]-u),t[3]=i+r*(n[3]-i),t},e.random=function(t,a){return a=a||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),e.normalize(t,t),e.scale(t,t,a),t},e.transformMat4=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=a[3];return t[0]=n[0]*r+n[4]*e+n[8]*o+n[12]*u,t[1]=n[1]*r+n[5]*e+n[9]*o+n[13]*u,t[2]=n[2]*r+n[6]*e+n[10]*o+n[14]*u,t[3]=n[3]*r+n[7]*e+n[11]*o+n[15]*u,t},e.transformQuat=function(t,a,n){var r=a[0],e=a[1],o=a[2],u=n[0],i=n[1],l=n[2],s=n[3],c=s*r+i*o-l*e,M=s*e+l*r-u*o,h=s*o+u*e-i*r,f=-u*r-i*e-l*o;return t[0]=c*s+f*-u+M*-l-h*-i,t[1]=M*s+f*-i+h*-u-c*-l,t[2]=h*s+f*-l+c*-i-M*-u,t[3]=a[3],t},e.forEach=function(){var t=e.create();return function(a,n,r,e,o,u){var i,l;for(n||(n=4),r||(r=0),l=e?Math.min(e*n+r,a.length):a.length,i=r;i<l;i+=n)t[0]=a[i],t[1]=a[i+1],t[2]=a[i+2],t[3]=a[i+3],o(t,t,u),a[i]=t[0],a[i+1]=t[1],a[i+2]=t[2],a[i+3]=t[3];return a}}(),e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},e.equals=function(t,a){var n=t[0],e=t[1],o=t[2],u=t[3],i=a[0],l=a[1],s=a[2],c=a[3];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-l)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(u-c)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))},t.exports=e},function(t,a,n){var r=n(6),e={};e.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},e.clone=function(t){var a=new r.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},e.fromValues=function(t,a){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=a,n},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},e.set=function(t,a,n){return t[0]=a,t[1]=n,t},e.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t},e.subtract=function(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t},e.sub=e.subtract,e.multiply=function(t,a,n){return t[0]=a[0]*n[0],t[1]=a[1]*n[1],t},e.mul=e.multiply,e.divide=function(t,a,n){return t[0]=a[0]/n[0],t[1]=a[1]/n[1],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},e.min=function(t,a,n){return t[0]=Math.min(a[0],n[0]),t[1]=Math.min(a[1],n[1]),t},e.max=function(t,a,n){return t[0]=Math.max(a[0],n[0]),t[1]=Math.max(a[1],n[1]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},e.scale=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t},e.scaleAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t},e.distance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1];return Math.sqrt(n*n+r*r)},e.dist=e.distance,e.squaredDistance=function(t,a){var n=a[0]-t[0],r=a[1]-t[1];return n*n+r*r},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],n=t[1];return Math.sqrt(a*a+n*n)},e.len=e.length,e.squaredLength=function(t){var a=t[0],n=t[1];return a*a+n*n},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},e.normalize=function(t,a){var n=a[0],r=a[1],e=n*n+r*r;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},e.cross=function(t,a,n){var r=a[0]*n[1]-a[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,a,n,r){var e=a[0],o=a[1];return t[0]=e+r*(n[0]-e),t[1]=o+r*(n[1]-o),t},e.random=function(t,a){a=a||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t},e.transformMat2=function(t,a,n){var r=a[0],e=a[1];return t[0]=n[0]*r+n[2]*e,t[1]=n[1]*r+n[3]*e,t},e.transformMat2d=function(t,a,n){var r=a[0],e=a[1];return t[0]=n[0]*r+n[2]*e+n[4],t[1]=n[1]*r+n[3]*e+n[5],t},e.transformMat3=function(t,a,n){var r=a[0],e=a[1];return t[0]=n[0]*r+n[3]*e+n[6],t[1]=n[1]*r+n[4]*e+n[7],t},e.transformMat4=function(t,a,n){var r=a[0],e=a[1];return t[0]=n[0]*r+n[4]*e+n[12],t[1]=n[1]*r+n[5]*e+n[13],t},e.forEach=function(){var t=e.create();return function(a,n,r,e,o,u){var i,l;for(n||(n=2),r||(r=0),l=e?Math.min(e*n+r,a.length):a.length,i=r;i<l;i+=n)t[0]=a[i],t[1]=a[i+1],o(t,t,u),a[i]=t[0],a[i+1]=t[1];return a}}(),e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},e.equals=function(t,a){var n=t[0],e=t[1],o=a[0],u=a[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(e-u)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))},t.exports=e},function(t,a){function n(t){var a="";return a+=t[0].toFixed(20)+",",a+=t[1].toFixed(20)+",",a+=t[2].toFixed(20)+",",a+=t[3].toFixed(20)+",",a+=t[4].toFixed(20)+",",a+=t[5].toFixed(20)+",",a+=t[6].toFixed(20)+",",a+=t[7].toFixed(20)+",",a+=t[8].toFixed(20)+",",a+=t[9].toFixed(20)+",",a+=t[10].toFixed(20)+",",a+=t[11].toFixed(20)+",",a+=t[12].toFixed(20)+",",a+=t[13].toFixed(20)+",",a+=t[14].toFixed(20)+",",a+=t[15].toFixed(20),"matrix3d("+a+")"}t.exports=n},function(t,a){"use strict";t.exports={size:function(t,a){var n=this.dom.style;return n.transformStyle=n.webkitTransformStyle="preserve-3d",n.width=t+"px",n.height=a+"px",this._size=[t,a],this}}},function(t,a){"use strict";t.exports={texture:function(t,a){var n=this.dom.style;return t&&(n.backgroundColor=t),a&&(n.backgroundImage="url("+a+")",n.backgroundSize="100% 100%"),this._texture=[t,a],this}}},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function u(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),l=function t(a,n,r){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,n);if(void 0===e){var o=Object.getPrototypeOf(a);return null===o?void 0:t(o,n,r)}if("value"in e)return e.value;var u=e.get;if(void 0!==u)return u.call(r)},s=n(3),c=r(s),M=n(19),h=r(M),f=function(t){function a(t){e(this,a);var n=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t)),r=n.dom.style;return r.transformStyle=r.webkitTransformStyle="preserve-3d",r.overflow="hidden",n.camera=new h.default,n.camera._scene=n,l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addChild",n).call(n,n.camera),n}return u(a,t),i(a,[{key:"getChildren",value:function(){return this.camera.children}},{key:"addChild",value:function(t){return t._isSceneObj=!0,this.camera.addChild(t),this}},{key:"removeChild",value:function(t){return this.camera.removeChild(t),this}},{key:"css",value:function(){return null}}]),a}(c.default);a.default=f},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function u(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){var n=[],r=!0,e=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!a||n.length!==a);r=!0);}catch(t){e=!0,o=t}finally{try{!r&&i.return&&i.return()}finally{if(e)throw o}}return n}return function(a,n){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return t(a,n);
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),s=function t(a,n,r){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,n);if(void 0===e){var o=Object.getPrototypeOf(a);return null===o?void 0:t(o,n,r)}if("value"in e)return e.value;var u=e.get;if(void 0!==u)return u.call(r)},c=n(5),M=n(15),h=r(M),f=n(3),d=r(f),m=function(t){function a(t){e(this,a);var n=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));n.containerMatrix=c.mat4.create(),n.fov=45;var r=n.dom.style;return r.transformStyle=r.webkitTransformStyle="preserve-3d",r.width="100%",r.height="100%",n}return u(a,t),l(a,[{key:"perspective",value:function t(a){a=a||this.fov;var n=this._scene;if(n){var t=.5*n._size[1]/Math.tan(.5*a/180*Math.PI);this._perspective=t,n.dom.style.perspective=n.dom.style.webkitPerspective=t+"px"}return this}},{key:"rotate",value:function(t,n){var r=i(this.position,3),e=r[0],o=r[1],u=r[2];return this.translate([-e,-o,-u]),s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"rotate",this).call(this,t,n),this.translate([e,o,u]),this}},{key:"rotateTo",value:function(t){var a=i(this.position,3),n=a[0],r=a[1],e=a[2];return void 0===t?this:(this.translate([-n,-r,-e]),this.euler=[t[0],t[1],t[2]],this.translate([n,r,e]),this)}},{key:"lookAt",value:function(){c.mat4.lookAt(this.mat,eye,center,up)}},{key:"css",value:function(){c.mat4.invert(this.containerMatrix,this.mat);var t="translate3d(0,0,"+this._perspective+"px) ",a=this.containerMatrix;return a[1]=-a[1],a[5]=-a[5],a[9]=-a[9],a[13]=-a[13],t+=(0,h.default)(a),t+=" translate3d(50%, 50%, 0)"}}]),a}(d.default);a.default=m},function(t,a,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,n,r){return n&&t(a.prototype,n),r&&t(a,r),a}}(),u=n(21),i=r(u),l=n(24),s=r(l),c=n(25),M=r(c),h=function(){function t(a){e(this,t),this.element=a,this.touches=[{x:0,y:0,dx:0,dy:0,dz:0},{x:0,y:0}],this._setupPan(),this._setupZoom(),this.gesture="pan",this._update=this._update.bind(this),this._update(),this._bindEvent()}return o(t,[{key:"onZoom",value:function(t){return this._onZoomCallback=t,this}},{key:"onPan",value:function(t){return this._onPanCallback=t,this}},{key:"_update",value:function(){(0,i.default)(this._update),this._canPan&&this._updatePan(),this._canZoom&&this._updateZoom()}},{key:"_bindEvent",value:function(){function t(t,r,o){var u=t.touches;2===u.length?(a.gesture="zoom",a._canZoom&&a[o](n,u)):(a.gesture="pan",a._canPan&&a[r](e,u[0]))}var a=this,n=this.touches,r=this.element,e=n[0];r.addEventListener("touchstart",function(a){a.preventDefault(),t(a,"_touchStartPan","_touchStartZoom"),n.down=!0}),r.addEventListener("touchend",function(t){n.down=!1}),r.addEventListener("touchmove",function(a){n.down&&t(a,"_touchMovePan","_touchMoveZoom")})}}],[{key:"implements",value:function(a){Object.assign(t.prototype,a)}}]),t}();a.default=h,h.implements(s.default),h.implements(M.default)},function(t,a,n){(function(a){for(var r=n(22),e="undefined"==typeof window?a:window,o=["moz","webkit"],u="AnimationFrame",i=e["request"+u],l=e["cancel"+u]||e["cancelRequest"+u],s=0;!i&&s<o.length;s++)i=e[o[s]+"Request"+u],l=e[o[s]+"Cancel"+u]||e[o[s]+"CancelRequest"+u];if(!i||!l){var c=0,M=0,h=[],f=1e3/60;i=function(t){if(0===h.length){var a=r(),n=Math.max(0,f-(a-c));c=n+a,setTimeout(function(){var t=h.slice(0);h.length=0;for(var a=0;a<t.length;a++)if(!t[a].cancelled)try{t[a].callback(c)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return h.push({handle:++M,callback:t,cancelled:!1}),M},l=function(t){for(var a=0;a<h.length;a++)h[a].handle===t&&(h[a].cancelled=!0)}}t.exports=function(t){return i.call(e,t)},t.exports.cancel=function(){l.apply(e,arguments)},t.exports.polyfill=function(){e.requestAnimationFrame=i,e.cancelAnimationFrame=l}}).call(a,function(){return this}())},function(t,a,n){(function(a){(function(){var n,r,e;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof a&&null!==a&&a.hrtime?(t.exports=function(){return(n()-e)/1e6},r=a.hrtime,n=function(){var t;return t=r(),1e9*t[0]+t[1]},e=n()):Date.now?(t.exports=function(){return Date.now()-e},e=Date.now()):(t.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime())}).call(this)}).call(a,n(23))},function(t,a){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function e(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(a){try{return c.call(null,t,0)}catch(a){return c.call(this,t,0)}}}function o(t){if(M===clearTimeout)return clearTimeout(t);if((M===r||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(t);try{return M(t)}catch(a){try{return M.call(null,t)}catch(a){return M.call(this,t)}}}function u(){m&&f&&(m=!1,f.length?d=f.concat(d):x=-1,d.length&&i())}function i(){if(!m){var t=e(u);m=!0;for(var a=d.length;a;){for(f=d,d=[];++x<a;)f&&f[x].run();x=-1,a=d.length}f=null,m=!1,o(t)}}function l(t,a){this.fun=t,this.array=a}function s(){}var c,M,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{M="function"==typeof clearTimeout?clearTimeout:r}catch(t){M=r}}();var f,d=[],m=!1,x=-1;h.nextTick=function(t){var a=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)a[n-1]=arguments[n];d.push(new l(t,a)),1!==d.length||m||e(i)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,a){"use strict";t.exports={_setupPan:function(t){t=t||{},this.panDamping=.05,this.panSpeed=.005},panSetup:function(t,a){return this._canPan=!0,void 0!==a&&(this.panDamping=a),void 0!==t&&(this.panSpeed=t),this},panAuto:function(t,a){var n=this.touches[0];return n.dx=t,n.dy=a,this},_updatePan:function(){var t=this.touches,a=this.panSpeed,n=this.panDamping,r=t[0];return t.down?(r.dx=0,void(r.dy=0)):(r.dx-=r.dx*n,r.dy-=r.dy*n,Math.abs(r.dx*a)<1e-4&&(r.dx=0),Math.abs(r.dy*a)<1e-4&&(r.dy=0),void this._pan(r.dx,r.dy))},_touchStartPan:function(t,a){t.x=a.clientX,t.y=a.clientY,t.dx=0,t.dy=0},_touchMovePan:function(t,a){t.dx=t.x-a.clientX,t.dy=t.y-a.clientY,t.x=a.clientX,t.y=a.clientY,this._pan(t.dx,t.dy)},_pan:function(t,a){var n=this.panSpeed;this._onPanCallback&&this._onPanCallback(t*n,a*n)}}},function(t,a){"use strict";t.exports={_setupZoom:function(t){t=t||{},this._z=0,this.zoomDamping=1e-4,this.zoomSpeed=20},zoomSetup:function(t,a){return this._canZoom=!0,void 0!==t&&(this.zoomSpeed=t),void 0!==a&&(this.zoomDamping=a),this},zoomAuto:function(t){return this._z=t,this},_updateZoom:function(){var t=this.touches,a=this.zoomDamping;return t.down?void(this._z=0):(this._z-=a,Math.abs(this._z)<Math.abs(2*a)&&(this._z=0),void this._zoom(this._z))},_calculateTouch:function(t,a){t[0].x=a[0].clientX,t[0].y=a[0].clientY,t[1].x=a[1].clientX,t[1].y=a[1].clientY},_touchStartZoom:function(t,a){this._calculateTouch(t,a)},_touchMoveZoom:function(t,a){var n=this._calculateScale(t,[{x:a[0].clientX,y:a[0].clientY},{x:a[1].clientX,y:a[1].clientY}]);this._z=n>1?1-n:1/n-1,this._zoom(this._z),this._calculateTouch(t,a)},_calculateScale:function(t,a){var n=function(t,a){var n=t.x-a.x,r=t.y-a.y;return Math.sqrt(n*n+r*r)},r=n(t[0],t[1]),e=n(a[0],a[1]);return e/r},_zoom:function(t){this._onZoomCallback&&this._onZoomCallback(t*this.zoomSpeed)}}}])});