<style lang = 'less' src = '../style/banner.less'></style>
<template>
  <view class = 'banner' wx:if = '{{isShow}}' @tap='copyUML'>
    <view  class = 'banner-button'>
      <text class = 'banner-text'>{{info}}</text>
    </view>
    </view>
</template>
<script>
import wepy from 'wepy';
export default class Banner extends wepy.component {
  props = {
    pageConfig: Object
  };
  watch = {
    pageConfig(newValue) {
      this.setConfig();
    }
  };
  data = {
    name: 'banner',
    isShow: false,
    info: '送您三天优酷会员，点击领取',
    secret: '复制这条信息＄CgDdZy41G6p＄后打开👉优酷👈【立即领取】'
  };
  methods = {
    copyUML() {
      wepy.setClipboardData({
        data: this.secret,
        success: (res) => {
          wepy.getClipboardData({
            success: (res) => {
              wepy.showModal({
                title: '',
                content: '由于平台限制，您需要手动打开优酷App领取',
                showCancel: false
              });
            }
          })
        }
      })
    }
  };
  onLoad () {
    if (this.pageConfig) {
      this.setConfig();
    }
  }
  setConfig() {
    let bannerConfig = this.pageConfig[this.name];
    if (parseInt(bannerConfig.isshow) === 1) {
      this.isShow = true;
    } else {
      this.isShow = false;
    }
    if (bannerConfig.content) {
      this.info = bannerConfig.content;
    }
    if (bannerConfig.secret) {
      this.secret = bannerConfig.secret;
    }
    this.$apply();
  }
}
</script>
