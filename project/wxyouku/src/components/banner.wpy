<style lang = 'less' src = '../style/banner.less'></style>
<template>
  <view class = 'banner' wx:if = '{{isShow}}' @tap='copyUML'>
    <view  class = 'banner-button'>
      <text class = 'banner-text'>{{info}}</text>
    </view>
    </view>
</template>
<script>
import wepy from 'wepy';
export default class Banner extends wepy.component {
  props = {
    pageConfig: Object
  };
  watch = {
    pageConfig(newValue) {
      this.setConfig();
    }
  };
  data = {
    name: 'banner',
    isShow: false,
    info: 'é€æ‚¨ä¸‰å¤©ä¼˜é…·ä¼šå‘˜ï¼Œç‚¹å‡»é¢†å–',
    secret: 'å¤åˆ¶è¿™æ¡ä¿¡æ¯ï¼„CgDdZy41G6pï¼„åæ‰“å¼€ğŸ‘‰ä¼˜é…·ğŸ‘ˆã€ç«‹å³é¢†å–ã€‘'
  };
  methods = {
    copyUML() {
      wepy.setClipboardData({
        data: this.secret,
        success: (res) => {
          wepy.getClipboardData({
            success: (res) => {
              wepy.showModal({
                title: '',
                content: 'ç”±äºå¹³å°é™åˆ¶ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨æ‰“å¼€ä¼˜é…·Appé¢†å–',
                showCancel: false
              });
            }
          })
        }
      })
    }
  };
  onLoad () {
    if (this.pageConfig) {
      this.setConfig();
    }
  }
  setConfig() {
    let bannerConfig = this.pageConfig[this.name];
    if (parseInt(bannerConfig.isshow) === 1) {
      this.isShow = true;
    } else {
      this.isShow = false;
    }
    if (bannerConfig.content) {
      this.info = bannerConfig.content;
    }
    if (bannerConfig.secret) {
      this.secret = bannerConfig.secret;
    }
    this.$apply();
  }
}
</script>
